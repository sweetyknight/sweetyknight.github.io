<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="这是Go语言从零开始学习的记录-基础部分。">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang基础">
<meta property="og:url" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="群芳髓">
<meta property="og:description" content="这是Go语言从零开始学习的记录-基础部分。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.1.png">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.2.png">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.3.png">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/GOPATH.png">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/1.jpg">
<meta property="og:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/3.png">
<meta property="article:published_time" content="2020-01-10T10:32:26.000Z">
<meta property="article:modified_time" content="2020-01-23T07:26:17.999Z">
<meta property="article:author" content="chen">
<meta property="article:tag" content="go">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.1.png">

<link rel="canonical" href="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Golang基础 | 群芳髓</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">群芳髓</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">觑眼底星辰轮转如旧</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/10/Golang%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="chen">
      <meta itemprop="description" content="大人，时代变了">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="群芳髓">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Golang基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-10 18:32:26" itemprop="dateCreated datePublished" datetime="2020-01-10T18:32:26+08:00">2020-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-23 15:26:17" itemprop="dateModified" datetime="2020-01-23T15:26:17+08:00">2020-01-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>这是Go语言从零开始学习的记录-基础部分。</p>
<a id="more"></a>
<blockquote>
<p>参考文档：<a href="http://www.topgoer.com/" target="_blank" rel="noopener">go</a></p>
</blockquote>
<h1 id="Go基础"><a href="#Go基础" class="headerlink" title="Go基础"></a>Go基础</h1><h2 id="命令行运行程序"><a href="#命令行运行程序" class="headerlink" title="命令行运行程序"></a>命令行运行程序</h2><p><code>go build 文件名.go</code> 此命令只会编译代码，生成二进制文件，不能运行可执行程序<br><code>go run 文件名.go 参数1 参数2...</code> 只会运行，不会生成可执行程序</p>
<h2 id="字符串格式化时常用动词及功能"><a href="#字符串格式化时常用动词及功能" class="headerlink" title="字符串格式化时常用动词及功能"></a>字符串格式化时常用动词及功能</h2><div class="table-container">
<table>
<thead>
<tr>
<th>动词</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>%v</td>
<td>按值的本来值输出</td>
</tr>
<tr>
<td>%+v</td>
<td>在 %v 基础上，对结构体字段名和值进行展开</td>
</tr>
<tr>
<td>%#v</td>
<td>输出 Go 语言语法格式的值</td>
</tr>
<tr>
<td>%T</td>
<td>输出 Go 语言语法格式的类型和值</td>
</tr>
<tr>
<td>%%</td>
<td>输出 % 本体</td>
</tr>
<tr>
<td>%b</td>
<td>整型以二进制方式显示</td>
</tr>
<tr>
<td>%o</td>
<td>整型以八进制方式显示</td>
</tr>
<tr>
<td>%d</td>
<td>整型以十进制方式显示</td>
</tr>
<tr>
<td>%x</td>
<td>整型以十六进制方式显示</td>
</tr>
<tr>
<td>%X</td>
<td>整型以十六进制、字母大写方式显示</td>
</tr>
<tr>
<td>%U</td>
<td>Unicode 字符</td>
</tr>
<tr>
<td>%f</td>
<td>浮点数</td>
</tr>
<tr>
<td>%p</td>
<td>指针，十六进制方式显示</td>
</tr>
</tbody>
</table>
</div>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>在 Go 编程语言中，数据类型用于声明函数和变量，告诉编译器这个数应该以多大的内存存储</p>
<h2 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h2><p>布尔型的值只可以是常量 true 或者 false。一个简单的例子：<code>var b bool = true</code>。</p>
<h2 id="数字类型"><a href="#数字类型" class="headerlink" title="数字类型"></a>数字类型</h2><p>整型<code>int</code>和浮点型<code>float32</code>、<code>float64</code>，Go 语言支持整型和浮点型数字，并且支持复数，其中位的运算采用补码。</p>
<h2 id="其他数字类型"><a href="#其他数字类型" class="headerlink" title="其他数字类型"></a>其他数字类型</h2><p><code>byte</code> 类似uint8<br><code>rune</code> 类似int32<br><code>uint</code> 32或64位<br><code>int</code> 与uint一样大小<br><code>uintptr</code> 无符号整型，用于存放一个指针</p>
<h2 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h2><p>字符串就是一串固定长度的字符连接起来的字符序列。Go 的字符串是由单个字节连接起来的。Go 语言的字符串的字节使用 UTF-8 编码标识 Unicode 文本。<br>字符是单引号，往往是单个字符，转义字符除外；字符串是双引号，一个或多个字符组成，字符串都隐藏了一个结束字符<code>\0</code>。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 <span class="keyword">string</span> <span class="comment">//声明</span></span><br><span class="line">str1 = <span class="string">"hello go"</span> <span class="comment">//赋值</span></span><br><span class="line">fmt.Println(<span class="string">"str1 = "</span>, str1)</span><br><span class="line"><span class="comment">//内建len() 函数可以接受不同类型参数并返回该类型的长度,</span></span><br><span class="line"><span class="comment">//传入的是字符串则返回字符串的长度，如果传入的是数组，则返回数组中包含的元素个数。</span></span><br><span class="line">fmt.Println(<span class="string">"len(str1) = "</span>, <span class="built_in">len</span>(str1))</span><br><span class="line">fmt.Printf(<span class="string">"str1[0] = %c, str1[7] = %c"</span>,str1[<span class="number">0</span>],str1[<span class="number">7</span>]) <span class="comment">//只想操作字符串中的某个字符</span></span><br></pre></td></tr></table></figure></p>
<h2 id="派生类型"><a href="#派生类型" class="headerlink" title="派生类型"></a>派生类型</h2><p>指针、数组、结构化类型、Channel类型、函数类型、切片类型、接口类型（interface）、Map类型</p>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>Go 语言变量名由字母、数字、下划线组成，其中首个字符不能为数字。<br>声明的变量必须要使用，不然会报错；指定变量类型，如果没有初始化，则变量默认为零值；同一个<code>（）</code>里,声明的变量是唯一的。<br>声明变量<code>var identifier type</code>,也可以一次声明多个变量<code>var identifier1,identifier2 type</code>。</p>
<h2 id="变量的初始化"><a href="#变量的初始化" class="headerlink" title="变量的初始化"></a>变量的初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var b int &#x3D; 10 &#x2F;&#x2F;初始化，声明变量时，同时赋值</span><br><span class="line">b &#x3D; 20 &#x2F;&#x2F;赋值，先声明，后赋值</span><br></pre></td></tr></table></figure>
<h2 id="自动推导类型"><a href="#自动推导类型" class="headerlink" title="自动推导类型"></a>自动推导类型</h2><p> 注意 <code>:=</code> 左侧如果没有声明新的变量，就产生编译错误。必须初始化，通过初始化的值确定类型<code>identifier := value</code>，例如<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c := <span class="number">10</span></span><br><span class="line">fmt.Printf(<span class="string">"c type is %T\n"</span>,c) <span class="comment">//%T打印变量所属类型</span></span><br></pre></td></tr></table></figure></p>
<h2 id="多变量声明"><a href="#多变量声明" class="headerlink" title="多变量声明"></a>多变量声明</h2><p>1.<code>vname1, vname2,vname3 := v1, v2, v3</code>，例如<code>a, b := 1, 2</code>, 出现在<code>:=</code>左侧的变量不应该是已经被声明过的，否则会导致编译错误<br>2.类型相同多个变量, 非全局变量<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vname1, vname2, vname3 <span class="keyword">type</span></span><br><span class="line">vname1, vname2, vname3 = v1, v2, v3</span><br></pre></td></tr></table></figure></p>
<p>3.<code>var vname1, vname2, vname3 = v1, v2, v3</code>和 python 很像,不需要显示声明类型，自动推断<br>4.这种因式分解关键字的写法一般用于声明全局变量<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    vname1 v_type1</span><br><span class="line">    vname2 v_type2</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<h3 id="交换两个变量的值"><a href="#交换两个变量的值" class="headerlink" title="交换两个变量的值"></a>交换两个变量的值</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a, b := <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">a, b = b, a</span><br><span class="line">fmt.Printf(<span class="string">"i = %d, j = %d\n"</span>, i, j)</span><br></pre></td></tr></table></figure>
<h3 id="匿名变量，丢弃数据不处理"><a href="#匿名变量，丢弃数据不处理" class="headerlink" title="匿名变量，丢弃数据不处理"></a>匿名变量，丢弃数据不处理</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tmp , _ = i, j</span><br><span class="line">fmt.Println(<span class="string">"tmp = "</span>, tmp)</span><br></pre></td></tr></table></figure>
<p>匿名变量要配合函数返回值使用才有优势<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="comment">//go语言可以有多个返回值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">string</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>, <span class="number">2</span>, <span class="string">"hello"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> c, d <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> e <span class="keyword">string</span></span><br><span class="line">	c, d, e = test()  <span class="comment">//return 1, 2, hello</span></span><br><span class="line">	fmt.Printf(<span class="string">"c = %d, d= %d, e=%s\n"</span>, c, d, e)</span><br><span class="line"></span><br><span class="line">	_, d, _ = test()   <span class="comment">//return 2</span></span><br><span class="line">	fmt.Printf(<span class="string">"d= %d\n"</span>,  d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="变量的输入"><a href="#变量的输入" class="headerlink" title="变量的输入"></a>变量的输入</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">int</span> <span class="comment">//声明变量</span></span><br><span class="line">	fmt.Printf(<span class="string">"请输入变量a： "</span>)</span><br><span class="line">	<span class="comment">//阻塞等待变量的输入</span></span><br><span class="line">	<span class="comment">//fmt.Scanf("%d", &amp;a)</span></span><br><span class="line">	fmt.Scan(&amp;a) <span class="comment">//简便写法</span></span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p>并不是所有类型都能互相转换，不能转换的类型叫做不兼容类型，例如<code>bool</code>类型<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> flag <span class="keyword">bool</span></span><br><span class="line">	flag = <span class="literal">true</span> <span class="comment">//0就是假，非0就是真</span></span><br><span class="line">	fmt.Printf(<span class="string">"flag = %t\n"</span>,flag)</span><br><span class="line">	fmt.Printf(<span class="string">"flag = %d\n"</span>,flag)</span><br><span class="line">	<span class="comment">//bool类型不能转化为int</span></span><br><span class="line">	<span class="comment">//fmt.Printf("flag = %t\n",int(flag))</span></span><br><span class="line">	<span class="comment">//flag = 1  报错，因为flag是bool类型，1是整型</span></span><br><span class="line">	<span class="comment">//flag =bool(1) 报错，两者是不兼容类型</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> ch <span class="keyword">byte</span> <span class="comment">//字符类型本质是整型</span></span><br><span class="line">	ch = <span class="string">'a'</span></span><br><span class="line">	<span class="keyword">var</span> t <span class="keyword">int</span></span><br><span class="line">	t = <span class="keyword">int</span>(ch) <span class="comment">//类型转换，把ch的值取出来后，转换成int再赋值给t</span></span><br><span class="line">	fmt.Println(<span class="string">"t = "</span>,t)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>输出结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flag = <span class="literal">true</span></span><br><span class="line">flag = %!d(<span class="keyword">bool</span>=<span class="literal">true</span>)</span><br><span class="line">t =  <span class="number">97</span></span><br></pre></td></tr></table></figure></p>
<h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><p>常用于结构体<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//给int64起一个别名叫bigint</span></span><br><span class="line">	<span class="keyword">type</span> bigint <span class="keyword">int64</span></span><br><span class="line">	<span class="keyword">var</span> a bigint  <span class="comment">//等价于int64 a</span></span><br><span class="line">	fmt.Printf(<span class="string">"a type is %T\n"</span>,a)</span><br><span class="line">	<span class="comment">//可以同时起多个别名</span></span><br><span class="line">	<span class="keyword">type</span>(</span><br><span class="line">		long <span class="keyword">int32</span></span><br><span class="line">		char <span class="keyword">byte</span></span><br><span class="line">	)</span><br><span class="line">	<span class="keyword">var</span> b long = <span class="number">11</span></span><br><span class="line">	<span class="keyword">var</span> ch char = <span class="string">'a'</span></span><br><span class="line">	fmt.Printf(<span class="string">"b = %d,ch = %c\n"</span>, b, ch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a <span class="keyword">type</span> is main.bigint</span><br><span class="line">b = <span class="number">11</span>,ch = a</span><br></pre></td></tr></table></figure></p>
<h2 id="值类型和引用类型"><a href="#值类型和引用类型" class="headerlink" title="值类型和引用类型"></a>值类型和引用类型</h2><p>所有像 int、float、bool 和 string 这些基本类型都属于值类型，使用这些类型的变量直接指向存在内存中的值:</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.1.png">
</center>

<p>当使用等号<code>=</code>将一个变量的值赋值给另一个变量时，如<code>j = i</code>，实际上是在内存中将<code>i</code>的值进行了拷贝：</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.2.png">
</center>

<p>可以通过<code>&amp;i</code>来获取变量 i 的内存地址，例如：0xf840000040（每次的地址都可能不一样）。值类型的变量的值存储在栈中。<br>内存地址会根据机器的不同而有所不同，甚至相同的程序在不同的机器上执行后也会有不同的内存地址。因为每台机器可能有不同的存储器布局，并且位置分配也可能不同。更复杂的数据通常会需要使用多个字，这些数据一般使用引用类型保存。</p>
<p><strong>一个引用类型的变量 r1 存储的是 r1 的值所在的内存地址（数字），或内存地址中第一个字所在的位置。</strong></p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/go_1.3.png">
</center>

<p><strong>这个内存地址为称之为指针</strong>，这个指针实际上也被存在另外的某一个字中。<br>同一个引用类型的指针指向的多个字可以是在连续的内存地址中（内存布局是连续的），这也是计算效率最高的一种存储形式；也可以将这些字分散存放在内存中，每个字都指示了下一个字所在的内存地址。<br>当使用赋值语句<code>r2 = r1</code>时，只有引用（地址）被复制。<br>如果 r1 的值被改变了，那么这个值的所有引用都会指向被修改后的内容，在这个例子中，r2 也会受到影响。</p>
<h1 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h1><p>常量是一个简单值的标识符，在程序运行时，不会被修改的量。<br>常量中的数据类型只可以是布尔型、数字型（整数型、浮点型和复数）和字符串型。<br>常量定义格式<code>const identifier [type] = value</code><br>可以省略类型说明符 [type]，因为编译器可以根据变量的值来推断其类型。</p>
<ol>
<li>显式类型定义：<code>const b string = &quot;abc&quot;</code></li>
<li>隐式类型定义：<code>const b = &quot;abc&quot;</code></li>
</ol>
<p>多个相同类型的变量可以简写<code>const c_name1, c_name2 = value1, value2</code></p>
<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><p>常量还可以用枚举<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    Unknown = <span class="number">0</span></span><br><span class="line">    Female = <span class="number">1</span></span><br><span class="line">    Male = <span class="number">2</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>数字 0、1 和 2 分别代表未知性别、女性和男性。<br>常量可以用len(), cap(), unsafe.Sizeof()函数计算表达式的值。常量表达式中，函数必须是内置函数，否则编译不过：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> 	<span class="string">"unsafe"</span></span><br><span class="line"><span class="keyword">const</span>(</span><br><span class="line">	a = <span class="string">"abc"</span></span><br><span class="line">	b = <span class="built_in">len</span>(a)</span><br><span class="line">	c = unsafe.Sizeof(a)</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="built_in">println</span>(a, b, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上实例运行结果为<code>abc 3 16</code></p>
<h2 id="iota"><a href="#iota" class="headerlink" title="iota"></a>iota</h2><p>iota，特殊常量，可以认为是一个可以被编译器修改的常量。<br>iota 在 const关键字出现时将被重置为 0(const 内部的第一行之前)，const 中每新增一行常量声明将使 iota 计数一次(iota 可理解为 const 语句块中的行索引)。<br>iota 可以被用作枚举值：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>(</span><br><span class="line">	a = <span class="literal">iota</span></span><br><span class="line">	b = <span class="literal">iota</span></span><br><span class="line">	c = <span class="literal">iota</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>第一个 iota 等于 0，每当 iota 在新的一行被使用时，它的值都会自动加 1；所以 a=0, b=1, c=2 可以简写为如下形式：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>(</span><br><span class="line">	a = <span class="literal">iota</span></span><br><span class="line">	b</span><br><span class="line">	c</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<h3 id="iota实例1"><a href="#iota实例1" class="headerlink" title="iota实例1"></a>iota实例1</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> 	<span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">const</span>(</span><br><span class="line">		a = <span class="literal">iota</span>  <span class="comment">//0</span></span><br><span class="line">		b         <span class="comment">//1</span></span><br><span class="line">		c		  <span class="comment">//2</span></span><br><span class="line">		d = <span class="string">"ha"</span>  <span class="comment">//独立值，iota += 1</span></span><br><span class="line">		e         <span class="comment">//"ha",iota += 1</span></span><br><span class="line">		f = <span class="number">100</span>   <span class="comment">//100,iota += 1</span></span><br><span class="line">		g         <span class="comment">//100,iota += 1</span></span><br><span class="line">		h = <span class="literal">iota</span>  <span class="comment">//7,恢复计数</span></span><br><span class="line">		i         <span class="comment">//8</span></span><br><span class="line">	)</span><br><span class="line">	fmt.Println(a, b, c, d, e, f, g, h, i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为<code>0 1 2 ha ha 100 100 7 8</code></p>
<h3 id="iota实例2"><a href="#iota实例2" class="headerlink" title="iota实例2"></a>iota实例2</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    i=<span class="number">1</span>&lt;&lt;<span class="literal">iota</span></span><br><span class="line">    j=<span class="number">3</span>&lt;&lt;<span class="literal">iota</span></span><br><span class="line">    k</span><br><span class="line">    l</span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"i="</span>,i)</span><br><span class="line">    fmt.Println(<span class="string">"j="</span>,j)</span><br><span class="line">    fmt.Println(<span class="string">"k="</span>,k)</span><br><span class="line">    fmt.Println(<span class="string">"l="</span>,l)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i= <span class="number">1</span></span><br><span class="line">j= <span class="number">6</span></span><br><span class="line">k= <span class="number">12</span></span><br><span class="line">l= <span class="number">24</span></span><br></pre></td></tr></table></figure></p>
<p>iota 表示从 0 开始自动加 1，所以 <code>i=1&lt;&lt;0</code>, <code>j=3&lt;&lt;1</code>（&lt;&lt; 表示左移的意思），即：<code>i=1</code>,<code>j=6</code>，这没问题，关键在 k 和 l，从输出结果看<code>k=3&lt;&lt;2</code>，<code>l=3&lt;&lt;3</code>。<br><code>i=1</code>：左移 0 位,不变仍为 1;<br><code>j=3</code>：左移 1 位,变为二进制 <code>110</code>, 即 6;<br><code>k=3</code>：左移 2 位,变为二进制 <code>1100</code>, 即 12;<br><code>l=3</code>：左移 3 位,变为二进制 <code>11000</code>,即 24。</p>
<h1 id="Go语言运算符"><a href="#Go语言运算符" class="headerlink" title="Go语言运算符"></a>Go语言运算符</h1><h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><p><code>+</code>  (相加）， <code>-</code>  (相减)，<code>*</code> （相乘），<code>/</code> （相除）<br><code>%</code> （求余）， <code>++</code>（自增），<code>--</code>（自减）</p>
<h2 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">运算符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">==</td>
<td style="text-align:left">检查两个值是否相等，如果相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">!=</td>
<td style="text-align:left">检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:left">检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:left">检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&gt;=</td>
<td style="text-align:left">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td style="text-align:center">&lt;=</td>
<td style="text-align:left">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><table>
    <tr>
        <td>运算符</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>&amp;&amp;</td>
        <td>逻辑 AND 运算符。 如果两边的操作数都是 True，则条件 True，否则为 False。</td>
    </tr>
    <tr>
        <td>||</td>
        <td>逻辑 OR 运算符。 如果两边的操作数有一个 True，则条件 True，否则为 False。</td>
    </tr>
    <tr>
        <td>!</td>
        <td>逻辑 NOT 运算符。 如果条件为 True，则逻辑 NOT 条件 False，否则为 True。</td>
    </tr>
</table>

<h2 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h2><p>位运算符对整数在内存中的二进制位进行操作，共有与或非，左移和右移五种。<br>Go 语言支持的位运算符如下表所示。假定 A 为60(<code>0011 1100</code>)，B 为13（<code>0000 1101</code>）：</p>
<table>
    <tr>
        <td>运算符</td>
        <td>描述</td>
        <td>实例</td>
    </tr>
    <tr>
        <td>&amp;</td>
        <td>双目运算符，进行两数的二进制相与</td>
        <td>(A &amp; B) 结果为 12, 二进制为 0000 1100</td>
    </tr>
    <tr>
        <td>|</td>
        <td>双目运算符，进行两数的二进制相或</td>
        <td>(A | B) 结果为 61, 二进制为 0011 1101</td>
    </tr>
    <tr>
        <td>^</td>
        <td>双目运算符，进行两数的二进制异或</td>
        <td>A ^ B) 结果为 49, 二进制为 0011 0001</td>
    </tr>
    <tr>
        <td>&lt;&lt;</td>
        <td>双目运算符，左移n位</td>
        <td>A &lt;&lt; 2 结果为 240 ，二进制为 1111 0000</td>
    </tr>
    <tr>
        <td>&gt;&gt;</td>
        <td>双目运算符，右移n位</td>
        <td>A &gt;&gt; 2 结果为 15 ，二进制为 0000 1111</td>
    </tr>
</table>

<blockquote>
<p>左移n位就是乘以2的n次方。 其功能把”&lt;&lt;”左边的运算数的各二进位全部左移若干位，由”&lt;&lt;”右边的数指定移动的位数，高位丢弃，低位补0。<br>右移n位就是除以2的n次方。 其功能是把”&gt;&gt;”左边的运算数的各二进位全部右移若干位，”&gt;&gt;”右边的数指定移动的位数。</p>
</blockquote>
<h2 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h2><table>
    <tr>
        <td>运算符</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>=</td>
        <td>简单的赋值运算符，将一个表达式的值赋给一个左值</td>
    </tr>
    <tr>
        <td>+=</td>
        <td>相加后再赋值</td>
    </tr>
    <tr>
        <td>-=</td>
        <td>相减后再赋值</td>
    </tr>
    <tr>
        <td>*=</td>
        <td>相乘后再赋值</td>
    </tr>
    <tr>
        <td>/=</td>
        <td>相除后再赋值</td>
    </tr>
    <tr>
        <td>%=</td>
        <td>求余后再赋值</td>
    </tr>
    <tr>
        <td>&lt;&lt;=</td>
        <td>左移后赋值</td>
    </tr>
    <tr>
        <td>&gt;&gt;=</td>
        <td>右移后赋值</td>
    </tr>
    <tr>
        <td>&amp;=</td>
        <td>按位与后赋值</td>
    </tr>
    <tr>
        <td>^=</td>
        <td>按位异或后赋值</td>
    </tr>
    <tr>
        <td>|=</td>
        <td>按位或后赋值</td>
    </tr>
</table>

<h2 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h2><div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>返回变量存储地址</td>
<td>&a; 将给出变量的实际地址。</td>
</tr>
<tr>
<td>*</td>
<td>指针变量</td>
<td>*a; 是一个指针变量</td>
</tr>
</tbody>
</table>
</div>
<h2 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h2><p>有些运算符拥有较高的优先级，二元运算符的运算方向均是从左至右。下表列出了所有运算符以及它们的优先级，由上至下代表优先级由高到低：</p>
<table>
    <tr>
        <td>优先级</td>
        <td>运算符</td>
    </tr>
    <tr>
        <td>5</td>
        <td>\* / % &lt;&lt; &gt;&gt; &amp; &amp;^</td>
    </tr>
    <tr>
        <td>4</td>
        <td>+ - | ^</td>
    </tr>
    <tr>
        <td>3</td>
        <td>== != &lt; &lt;= &gt; &gt;=</td>
    </tr>
    <tr>
        <td>2</td>
        <td>&amp;&amp;</td>
    </tr>
    <tr>
        <td>1</td>
        <td>||</td>
    </tr>
</table>

<h1 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h1><h2 id="条件判断语句"><a href="#条件判断语句" class="headerlink" title="条件判断语句"></a>条件判断语句</h2><p><strong>Go 没有三目运算符，所以不支持 ?: 形式的条件判断。</strong><br>Go语言支持最基本的三种程序运行结构：顺序结构（程序按顺序执行，不发生跳转）、选择结构（依据是否满足条件，有选择的执行）、循环结构（依据条件是否满足，循环多次执行某一代码）</p>
<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><p>满足条件执行，否则不执行<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">"hello"</span></span><br><span class="line">	<span class="keyword">if</span> s == <span class="string">"hello"</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">"hello"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">  <span class="comment">//if支持一个初始化语句，初始化语句和判断条件以分号分隔</span></span><br><span class="line">	<span class="keyword">if</span> a := <span class="number">10</span>; a == <span class="number">10</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">"a == 10"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="if…else语句"><a href="#if…else语句" class="headerlink" title="if…else语句"></a>if…else语句</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> a:= <span class="number">10</span>; a == <span class="number">10</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">"a == 10"</span>)</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span> a &gt; <span class="number">10</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"a &gt; 10"</span>)</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span> a &lt; <span class="number">10</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">"a &lt;==&gt; 10"</span>)</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		fmt.Println(<span class="string">"不可能"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h3><h4 id="实例1"><a href="#实例1" class="headerlink" title="实例1"></a>实例1</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// var num int</span></span><br><span class="line">	<span class="comment">// fmt.Println("请输入：")</span></span><br><span class="line">	<span class="comment">// fmt.Scan(&amp;num)</span></span><br><span class="line">	<span class="comment">// switch num &#123;  //switch后面是变量本身</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//switch支持一个初始化语句，初始化语句和变量本身，以分号隔离</span></span><br><span class="line">	<span class="keyword">switch</span> num := <span class="number">1</span>; num&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		fmt.Println(<span class="number">1</span>)</span><br><span class="line">		<span class="comment">//break  //Go依然保留了break，但可以不写，默认包含</span></span><br><span class="line">		<span class="keyword">fallthrough</span> <span class="comment">//不跳出switch语句，后面的无条件执行</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>:</span><br><span class="line">		fmt.Println(<span class="string">"hello"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"其他"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当输入<code>1</code>时，执行结果为<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line">hello</span><br></pre></td></tr></table></figure></p>
<h4 id="实例2"><a href="#实例2" class="headerlink" title="实例2"></a>实例2</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	score := <span class="number">85</span></span><br><span class="line">	<span class="keyword">switch</span> &#123;  <span class="comment">//可以没有条件</span></span><br><span class="line">	<span class="keyword">case</span> score &gt; <span class="number">90</span>:</span><br><span class="line">		fmt.Println(<span class="string">"优秀"</span>)</span><br><span class="line">	<span class="keyword">case</span> score &gt; <span class="number">80</span>:</span><br><span class="line">		fmt.Println(<span class="string">"良好"</span>)</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		fmt.Println(<span class="string">"一般"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="select语句"><a href="#select语句" class="headerlink" title="select语句"></a>select语句</h3><p>select 是Go中的一个控制结构，类似于用于通信的switch语句。每个case必须是一个通信操作，要么是发送要么是接收。 select 随机执行一个可运行的case。如果没有case可运行，它将阻塞，直到有case可运行。一个默认的子句应该总是可运行的。<br>select用于处理异步IO操作。select会监听case语句中channel的读写操作，当case中channel读写操作为非阻塞状态（即能读写）时，将会触发相应的动作。 select中的case语句必须是一个channel操作。</p>
<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">每个<span class="keyword">case</span>都必须是一个通信</span><br><span class="line">所有channel表达式都会被求值</span><br><span class="line">所有被发送的表达式都会被求值</span><br><span class="line">如果任意某个通信可以进行，它就执行；其他被忽略。</span><br><span class="line">如果有多个<span class="keyword">case</span>都可以运行，<span class="keyword">select</span>会随机公平地选出一个执行。其他不会执行。</span><br><span class="line">否则：</span><br><span class="line">如果有<span class="keyword">default</span>子句，则执行该语句。</span><br><span class="line">如果没有<span class="keyword">default</span>字句，<span class="keyword">select</span>将阻塞，直到某个通信可以运行；Go不会重新对channel或值进行求值。</span><br></pre></td></tr></table></figure>
<h4 id="例1"><a href="#例1" class="headerlink" title="例1"></a>例1</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">//Channel是Go中的一个核心类型，你可以把它看成一个管道，通过它并发核心单元就可以发送或者接收数据进行通讯</span></span><br><span class="line">   <span class="keyword">var</span> c1, c2, c3 <span class="keyword">chan</span> <span class="keyword">int</span> <span class="comment">//select可以监听channel的数据流动</span></span><br><span class="line">   <span class="keyword">var</span> i1, i2 <span class="keyword">int</span></span><br><span class="line">   <span class="keyword">select</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> i1 = &lt;-c1:  <span class="comment">//从Channel c1中接收数据，并将数据赋值给i1</span></span><br><span class="line">         fmt.Printf(<span class="string">"received "</span>, i1, <span class="string">" from c1\n"</span>)</span><br><span class="line">      <span class="keyword">case</span> c2 &lt;- i2:  <span class="comment">// 发送值i2到Channel c2中</span></span><br><span class="line">         fmt.Printf(<span class="string">"sent "</span>, i2, <span class="string">" to c2\n"</span>)</span><br><span class="line">      <span class="keyword">case</span> i3, ok := (&lt;-c3):  <span class="comment">// same as: i3, ok := &lt;-c3</span></span><br><span class="line">         <span class="keyword">if</span> ok &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"received "</span>, i3, <span class="string">" from c3\n"</span>)</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"c3 is closed\n"</span>)</span><br><span class="line">         &#125;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">         fmt.Printf(<span class="string">"no communication\n"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no communication</span><br></pre></td></tr></table></figure></p>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><p>基本语法：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 初始化条件 ; 判断条件 ; 条件变化&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>只有一种<code>for</code>循环，没有<code>while</code>,<code>do...while</code><br>GO 语言支持以下几种循环控制语句：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>控制语句</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>break</td>
<td>经常用于中断当前 for 循环或跳出 switch 语句</td>
</tr>
<tr>
<td>continue</td>
<td>跳过当前循环的剩余语句，然后继续进行下一轮循环</td>
</tr>
<tr>
<td>go</td>
<td>将控制转移到被标记的语句。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="break和continue"><a href="#break和continue" class="headerlink" title="break和continue"></a>break和continue</h3><p><strong>break跳出循环，continue跳过本次循环</strong><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		i++</span><br><span class="line">		time.Sleep(time.Second)</span><br><span class="line">		<span class="keyword">if</span> i == <span class="number">5</span> &#123;</span><br><span class="line">		<span class="comment">//break能用在loop,switch以及select中</span></span><br><span class="line">		<span class="comment">//break   //跳出循环，如果嵌套多个循环，跳出最近的那个内循环。即打印到4就退出</span></span><br><span class="line">		<span class="comment">//continue只能用在loop</span></span><br><span class="line">		<span class="keyword">continue</span>  <span class="comment">//跳过本次循环，下一次继续。即跳过打印5直接往下打印</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="goto的使用"><a href="#goto的使用" class="headerlink" title="goto的使用"></a>goto的使用</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="number">111</span>)</span><br><span class="line">	<span class="comment">//goto无条件跳转，可以用在任何地方但是不能跨函数使用</span></span><br><span class="line">	<span class="keyword">goto</span> End <span class="comment">//End是用户起的名字，叫标签</span></span><br><span class="line">	fmt.Println(<span class="number">222</span>)</span><br><span class="line">End:</span><br><span class="line">	fmt.Println(<span class="number">333</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">111</span></span><br><span class="line"><span class="number">333</span></span><br></pre></td></tr></table></figure></p>
<h3 id="range的使用"><a href="#range的使用" class="headerlink" title="range的使用"></a>range的使用</h3><p>打印输出字符串的每个元素<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="string">"abc"</span></span><br><span class="line">	<span class="comment">//迭代打印每个元素，默认返回2个值:一个是元素位置，一个是元素本身</span></span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> str &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"str[%d]=%c "</span>, i, data)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> str &#123;   <span class="comment">//第2个返回值默认丢弃，返回元素的位置（下标）</span></span><br><span class="line">	<span class="comment">//等价于 for i,_ :=range str&#123;</span></span><br><span class="line">	<span class="comment">//等价于 for i := 0; i &lt;len(str); i++&#123;</span></span><br><span class="line">		fmt.Printf(<span class="string">"str[%d]=%c "</span>, i, str[i])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str[<span class="number">0</span>]=a str[<span class="number">1</span>]=b str[<span class="number">2</span>]=c</span><br><span class="line">str[<span class="number">0</span>]=a str[<span class="number">1</span>]=b str[<span class="number">2</span>]=c</span><br></pre></td></tr></table></figure></p>
<h3 id="无限循环"><a href="#无限循环" class="headerlink" title="无限循环"></a>无限循环</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123; <span class="comment">//for后不写任何东西，循环永远为真，死循环</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果循环中条件语句永远不为 false 则会进行无限循环，我们可以通过 for 循环语句中只设置一个条件表达式来执行无限循环：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="literal">true</span>  &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"这是无限循环。\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><p>计算1到100的合<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sum := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span> ;i &lt;= <span class="number">100</span> ; i++ &#123;</span><br><span class="line">		sum =sum + i</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="函数定义及调用"><a href="#函数定义及调用" class="headerlink" title="函数定义及调用"></a>函数定义及调用</h2><p>Go语言的函数定义如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">function_name</span><span class="params">([parameter list])</span> [<span class="title">return_type</span>]</span>&#123;</span><br><span class="line">  <span class="comment">//func：函数由 func 开始声明</span></span><br><span class="line">  <span class="comment">//function_name，首字母小写为private，大写为public</span></span><br><span class="line">  <span class="comment">//return_types：返回类型，函数返回一列值。return_types 是该列值的数据类型。有些功能不需要返回值，这种情况下 return_types 不是必须的。</span></span><br><span class="line">  函数体</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>调用函数，向函数传递参数，并返回值。<br>调用函数传递的叫实参。定义函数时，函数名后()定义的参数叫形参。参数传递只能由实参传递给形参。</p>
<h3 id="有参有返回值"><a href="#有参有返回值" class="headerlink" title="有参有返回值"></a>有参有返回值</h3><p>调用函数返回最大值：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(num1, num2 <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">  	<span class="keyword">var</span> result <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">if</span>(num1&gt;num2)&#123;</span><br><span class="line">		result=num1</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		result=num2</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a <span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line">	<span class="keyword">var</span> b <span class="keyword">int</span> = <span class="number">200</span></span><br><span class="line">	<span class="keyword">var</span> ret <span class="keyword">int</span></span><br><span class="line">        ret = max(a, b)</span><br><span class="line">	fmt.Printf(<span class="string">"a，b的最大值是：%d\n"</span>,ret)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="无参有返回值"><a href="#无参有返回值" class="headerlink" title="无参有返回值"></a>无参有返回值</h3><p>只能有一个返回值<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc01</span><span class="params">()</span> <span class="params">(result <span class="keyword">int</span>)</span></span> &#123; <span class="comment">//给返回值命名</span></span><br><span class="line">	result = <span class="number">123</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := myfunc01()</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="函数返回多个值"><a href="#函数返回多个值" class="headerlink" title="函数返回多个值"></a>函数返回多个值</h3><p>Go函数可以返回多个值，例如：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(x, y <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">string</span>, <span class="keyword">string</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> y, x</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a, b := swap(<span class="string">"hello"</span>, <span class="string">"world"</span>)</span><br><span class="line">	fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="不定参数列表"><a href="#不定参数列表" class="headerlink" title="不定参数列表"></a>不定参数列表</h2><p>不定参数只能放在形参中的最后一个参数</p>
<h3 id="实例1-1"><a href="#实例1-1" class="headerlink" title="实例1"></a>实例1</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//...type这样的类型叫不定参数类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc01</span> <span class="params">(a <span class="keyword">int</span> ,args ...<span class="keyword">int</span>)</span></span> &#123; <span class="comment">//传递的实参可以是0或多个</span></span><br><span class="line">	fmt.Println(<span class="string">"len(args) = "</span>,<span class="built_in">len</span>(args))</span><br><span class="line">	<span class="keyword">for</span> i, data := <span class="keyword">range</span> args &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"args[%d] = %d\n"</span>, i, data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//调用函数时一定要给固定参数传参，不定参数根据需求传参</span></span><br><span class="line">	myFunc01(<span class="number">1</span>)</span><br><span class="line">	myFunc01(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">	myFunc01(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>(args) =  <span class="number">0</span></span><br><span class="line"><span class="built_in">len</span>(args) =  <span class="number">1</span></span><br><span class="line">args[<span class="number">0</span>] = <span class="number">2</span></span><br><span class="line"><span class="built_in">len</span>(args) =  <span class="number">2</span></span><br><span class="line">args[<span class="number">0</span>] = <span class="number">2</span></span><br><span class="line">args[<span class="number">1</span>] = <span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<h3 id="实例2-1"><a href="#实例2-1" class="headerlink" title="实例2"></a>实例2</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc01</span><span class="params">(tmp ...<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> _, data := <span class="keyword">range</span> tmp &#123;</span><br><span class="line">		fmt.Print(data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc02</span><span class="params">(tmp ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, data := <span class="keyword">range</span> tmp &#123;</span><br><span class="line">		fmt.Print(data)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(args ...<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	<span class="comment">//全部元素传给myfunc</span></span><br><span class="line">	myfunc01(args...)</span><br><span class="line">	fmt.Println()</span><br><span class="line">	<span class="comment">//只想把后2个参数传递给另一个使用</span></span><br><span class="line">	myfunc02(args[<span class="number">2</span>:]...)	<span class="comment">//从args[2]开始（包括本身），把后面所有元素传递过去</span></span><br><span class="line">	fmt.Println()</span><br><span class="line">	myfunc02(args[:<span class="number">2</span>]...)   <span class="comment">//从args[0]到args[2](不包括args[2])</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1234</span></span><br><span class="line"><span class="number">34</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure></p>
<h2 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h2><p>函数如果使用参数，该变量可称为函数的形参。形参就像定义在函数体内的局部变量，形式参数会作为函数的局部变量来使用。<br>调用函数，可以通过两种方式来传递参数：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>传值类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>值传递</td>
<td>值传递是指在调用函数时将实际参数复制一份传递到函数中，这样在函数中如果对参数进行修改，将不会影响到实际参数。</td>
</tr>
<tr>
<td>引用传递</td>
<td>引用传递是指在调用函数时将实际参数的地址传递到函数中，那么在函数中对参数所进行的修改，将影响到实际参数。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="函数调用流程"><a href="#函数调用流程" class="headerlink" title="函数调用流程"></a>函数调用流程</h2><p>函数调用流程：先调用后返回，先进后出</p>
<h3 id="普通函数"><a href="#普通函数" class="headerlink" title="普通函数"></a>普通函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc01</span><span class="params">(a <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	myfunc02(a - <span class="number">1</span>)</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>,a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc02</span><span class="params">(b <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	myfunc03(b <span class="number">-1</span>)</span><br><span class="line">	fmt.Println(<span class="string">"b = "</span>,b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myfunc03</span><span class="params">(c <span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">	fmt.Println(<span class="string">"c = "</span>,c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	myfunc01(<span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">"main"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c =  <span class="number">1</span></span><br><span class="line">b =  <span class="number">2</span></span><br><span class="line">a =  <span class="number">3</span></span><br><span class="line">main</span><br></pre></td></tr></table></figure></p>
<h3 id="递归调用"><a href="#递归调用" class="headerlink" title="递归调用"></a>递归调用</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(a <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	i ++</span><br><span class="line">	fmt.Printf(<span class="string">"第%d次 "</span>,i)</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">	<span class="keyword">if</span> a == <span class="number">1</span>&#123;</span><br><span class="line">		i ++</span><br><span class="line">		fmt.Printf(<span class="string">"第%d次 "</span>,i)</span><br><span class="line">		fmt.Println(<span class="string">"a = "</span>, a)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	test(a <span class="number">-1</span>)</span><br><span class="line">	i ++</span><br><span class="line">	fmt.Printf(<span class="string">"第%d次 "</span>,i)</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>,a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	test(<span class="number">3</span>)</span><br><span class="line">	fmt.Println(<span class="string">"main"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第<span class="number">1</span>次 a =  <span class="number">3</span></span><br><span class="line">第<span class="number">2</span>次 a =  <span class="number">2</span></span><br><span class="line">第<span class="number">3</span>次 a =  <span class="number">1</span></span><br><span class="line">第<span class="number">4</span>次 a =  <span class="number">1</span></span><br><span class="line">第<span class="number">5</span>次 a =  <span class="number">2</span></span><br><span class="line">第<span class="number">6</span>次 a =  <span class="number">3</span></span><br><span class="line">main</span><br></pre></td></tr></table></figure></p>
<h3 id="实例1-递归实现累加"><a href="#实例1-递归实现累加" class="headerlink" title="实例1 递归实现累加"></a>实例1 递归实现累加</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(i <span class="keyword">int</span>)</span> <span class="params">(sum <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> i== <span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> i + test(i - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sum := test(<span class="number">100</span>)</span><br><span class="line">	fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h2><p>函数也是一种数据类型，通过type给一个函数起名。</p>
<h3 id="实例1-2"><a href="#实例1-2" class="headerlink" title="实例1"></a>实例1</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(a &lt; b)&#123;</span><br><span class="line">		<span class="keyword">return</span> a</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> b</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//FuncType是一个函数类型，没有&#123;&#125;</span></span><br><span class="line"><span class="keyword">type</span> FuncType <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> result <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">var</span> fTest FuncType <span class="comment">//声明一个函数类型的变量test</span></span><br><span class="line">	fTest = add     <span class="comment">//是变量就可以赋值</span></span><br><span class="line">	result = fTest(<span class="number">10</span>, <span class="number">20</span>) <span class="comment">//等价于add(10, 20)</span></span><br><span class="line">	fmt.Println(result)</span><br><span class="line">	fTest = min</span><br><span class="line">	result = fTest(<span class="number">10</span>, <span class="number">20</span>) <span class="comment">//等价于min(10, 20)</span></span><br><span class="line">	fmt.Println(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行就结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">30</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure></p>
<h3 id="实例2-回调函数"><a href="#实例2-回调函数" class="headerlink" title="实例2 回调函数"></a>实例2 回调函数</h3><p>回调函数，函数有一个参数是函数类型，这个函数就是回调函数<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="comment">//实现函数，加法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//实现减法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//FuncType是一个函数类型，没有&#123;&#125;</span></span><br><span class="line"><span class="keyword">type</span> FuncType <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="comment">//多态，多种形态，调用同一个接口，可以实现不同的表现</span></span><br><span class="line"><span class="comment">//先有想法，后续进行实现</span></span><br><span class="line"><span class="comment">//计算器，可以进行多种运算,加减乘除</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Calc</span><span class="params">(a, b <span class="keyword">int</span>, fTest FuncType)</span> <span class="params">(result <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Calc"</span>)</span><br><span class="line">	result = fTest(a, b)  <span class="comment">//函数一开始并没有实现，可以拓展</span></span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := Calc(<span class="number">1</span>, <span class="number">1</span>,add)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">	b := Calc(<span class="number">2</span>, <span class="number">1</span>,min)</span><br><span class="line">	fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Calc</span><br><span class="line"><span class="number">2</span></span><br><span class="line">Calc</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	<span class="comment">//匿名函数，没有函数名字，函数定义，还没有调用</span></span><br><span class="line">	f1 := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(a)</span><br><span class="line">	&#125;</span><br><span class="line">	f1() <span class="comment">//调用函数</span></span><br><span class="line">	<span class="comment">//定义匿名函数，同时调用</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Println(a)</span><br><span class="line">	&#125;()   <span class="comment">//后面的()代表调用此匿名函数</span></span><br><span class="line">	<span class="comment">//带参数的匿名函数</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">(i <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">		fmt.Println(i)</span><br><span class="line">	&#125;(<span class="number">10</span>)</span><br><span class="line">	<span class="comment">//有参有返回值的匿名函数</span></span><br><span class="line">	x, y := <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="params">(max, min <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">		<span class="keyword">if</span> i &gt; j &#123;</span><br><span class="line">			max = i</span><br><span class="line">			min = j</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			max = j</span><br><span class="line">			min = i</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="comment">//有返回值一定要有return</span></span><br><span class="line">	&#125;(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="延迟调用defer"><a href="#延迟调用defer" class="headerlink" title="延迟调用defer"></a>延迟调用defer</h2><p>defer只能放在函数或方法的内部，延迟调用，main函数结束前调用，多个defer先进后出。无论中途发生什么错误，defer语句都能执行到。</p>
<h3 id="例1-1"><a href="#例1-1" class="headerlink" title="例1"></a>例1</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"111"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"222"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"333"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"444"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">222</span><br><span class="line">444</span><br><span class="line">333</span><br><span class="line">111</span><br></pre></td></tr></table></figure></p>
<h3 id="例2"><a href="#例2" class="headerlink" title="例2"></a>例2</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(a <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	restlt := <span class="number">100</span>/a</span><br><span class="line">	fmt.Println(<span class="string">"result = "</span>,restlt)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"111"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"222"</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"333"</span>)</span><br><span class="line">	test(<span class="number">0</span>)</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">"444"</span>)</span><br><span class="line">	fmt.Println(<span class="string">"555"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br>程序先打印<code>222</code>,执行到错误时程序崩溃返回，然后打印出<code>333</code>和<code>111</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">222</span><br><span class="line">333</span><br><span class="line">111</span><br><span class="line">panic: runtime error: integer divide by zero</span><br></pre></td></tr></table></figure></p>
<h3 id="defer和匿名函数结合使用"><a href="#defer和匿名函数结合使用" class="headerlink" title="defer和匿名函数结合使用"></a>defer和匿名函数结合使用</h3><h4 id="例1-2"><a href="#例1-2" class="headerlink" title="例1"></a>例1</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(a, b <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"1:a = %d, b = %d\n"</span>, a, b)</span><br><span class="line">	&#125;(a, b) <span class="comment">//把参数已经传了过去，只是没有调用</span></span><br><span class="line">	<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"2:a = %d, b = %d\n"</span>, a, b)</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"3:a = %d, b = %d\n"</span>, a, b)</span><br><span class="line">	&#125;()</span><br><span class="line">	a = <span class="number">111</span></span><br><span class="line">	b = <span class="number">222</span></span><br><span class="line">	fmt.Printf(<span class="string">"4：a = %d, b = %d\n"</span>, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>:a = <span class="number">10</span>, b = <span class="number">20</span></span><br><span class="line"><span class="number">4</span>：a = <span class="number">111</span>, b = <span class="number">222</span></span><br><span class="line"><span class="number">3</span>:a = <span class="number">111</span>, b = <span class="number">222</span></span><br><span class="line"><span class="number">1</span>:a = <span class="number">10</span>, b = <span class="number">20</span></span><br></pre></td></tr></table></figure></p>
<h4 id="例2-1"><a href="#例2-1" class="headerlink" title="例2"></a>例2</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="params">(ret <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		ret++</span><br><span class="line">	&#125;()</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(f())  <span class="comment">//2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>变量 ret 的值为 2，因为 <code>ret++</code> 是在执行 <code>return 1</code> 语句后发生的。</p>
<h2 id="获取命令行参数"><a href="#获取命令行参数" class="headerlink" title="获取命令行参数"></a>获取命令行参数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//接收用户传递的参数，都是以字符串的形式传递</span></span><br><span class="line">	list := os.Args</span><br><span class="line">	n := <span class="built_in">len</span>(list)</span><br><span class="line">	fmt.Println(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以看到程序本身也要占用一个参数</span></span><br><span class="line">D:\Go_code&gt;<span class="keyword">go</span> build hello.<span class="keyword">go</span> <span class="comment">//生成可执行程序</span></span><br><span class="line">D:\Go_code&gt;hello.exe</span><br><span class="line"><span class="number">1</span></span><br><span class="line">D:\Go_code&gt;hello.exe <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Go工程管理"><a href="#Go工程管理" class="headerlink" title="Go工程管理"></a>Go工程管理</h1><p>在实际的开发工作中，直接调用编译器进行编译和链接的场景是少而又少，因为在工程中不会简单到只有一个源代码文件，且源文件之间会有相互的依赖关系。如果这样一个文件一个文件逐步编译，那不亚于一场灾难。<br>Go命令行工具的革命性之处在于彻底消除了工程文件的概念，完全用目录结构和包名来推导工程结构和构建顺序。针对只有一个源文件的情况讨论工程管理看起来会比较多余，因为这可以直接用<code>go run</code>和<code>go build</code>搞定。</p>
<h2 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h2><p>Go代码必须放在工作区内。工作区就是一个对应于特定工程的目录，它包含3个子目录：src目录(必须的)、pkg目录和bin目录。</p>
<ul>
<li>src目录：用与以代码包的形式组织并保存Go源码文件。(比如：<code>.go</code> <code>.c</code> <code>.h</code> <code>.s</code>等)</li>
<li>pkg目录：用于存放经由<code>go install</code>命令构建安装后的代码包(包含Go库源码文件)的<code>.a</code>归档文件</li>
<li>bin目录：与pkg目录类似，在通过<code>go install</code>命令完成安装后，保存由Go命令源码文件生成的可执行文件</li>
</ul>
<blockquote>
<p>目录src用于包含所有的源代码，是Go命令行工具的一个强制的规则，而pkg和bin则无需手动创建，如果必要Go命令行工具在构建过程中会自动创建这些目录。</p>
</blockquote>
<p>需要特别注意的是，只有当环境变量GOPATH中只包含一个工作区的目录路径时，<code>go install</code>命令才会把命令源码安装到当前工作区的bin目录下。若环境变量GOPATH中包含多个工作区的目录路径，像这样执行<code>go install</code>命令就会失效，此时必须设置环境变量GOBIN。</p>
<h2 id="设置GOPATH有什么意义"><a href="#设置GOPATH有什么意义" class="headerlink" title="设置GOPATH有什么意义"></a>设置GOPATH有什么意义</h2><p>环境变量GOPATH的值可以是一个目录的路径，也可以包含多个目录的路径，每个目录都代表Go语言的一个工作区。这些工作区用于放置Go语言的源码文件(source file)，以及安装(install)后的归档文件(archive file)和可执行文件(executable file)。<br>实际开发中，工作目录往往有多个，这些工作目录的目录路径都需要添加至GOPATH。</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>所有Go语言的程序都会组织成若干组文件，每组文件都被称为一个包，以包作为管理单位。这样每个包的代码都可以作为很小的复用单位，被其他项目引用。<br>go语言的包的命名，遵循简洁、小写、和go文件所在目录同名的原则，这样就便于我们引用，书写以及快速定位查找。</p>
<h3 id="远程包导入"><a href="#远程包导入" class="headerlink" title="远程包导入"></a>远程包导入</h3><p>互联网的时代，现在大家使用类似于Github共享代码的越来越多，如果有的Go包共享在Github上，我们一样有办法使用他们，这就是远程导入包了，或者是网络导入。<br><code>import &quot;github.com/spf13/cobra&quot;</code><br>这种导入，前提必须是该包托管在一个分布式的版本控制系统上，比如Github、Bitbucket等，并且是Public的权限，可以让我们直接访问它们。<br>编译在导入它们的时候，会先在<code>GOPATH</code>下搜索这个包，如果没有找到，就会使用<code>go get</code>工具从版本控制系统（GitHub）获取，并且会把获取到的源代码存储在<code>GOPATH</code>目录下对应URL的目录里，以供编译使用。</p>
<h3 id="命名导入"><a href="#命名导入" class="headerlink" title="命名导入"></a>命名导入</h3><p>我们知道，在使用import关键字导入包之后，我们就可以在代码中通过包名使用该包下相应的函数、接口等。如果我们导入的包名正好有重复的怎么办呢？针对这种情况，Go语言可以让我们对导入的包重新命名，这就是命名导入。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	myfmt <span class="string">"mylib/fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println()</span><br><span class="line">	myfmt.Println()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="忽略包"><a href="#忽略包" class="headerlink" title="忽略包"></a>忽略包</h4><p>Go语言规定，导入的包必须要使用，否则会包编译错误，这是一个非常好的规则，因为这样可以避免我们引用很多无用的代码而导致的代码臃肿和程序的庞大，因为很多时候，我们都不知道哪些包是否使用，这在C和Java上会经常遇到，有时候我们不得不借助工具来查找我们没有使用的文件、类型、方法和变量等，把它们清理掉。</p>
<p>但是有时候，我们需要导入一个包，但是又不使用它，按照规则，这是不行的，为此Go语言给我们提供了一个空白标志符<code>_</code>,只需要我们使用<code>_</code>重命名我们导入的包就可以了。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">"mylib/fmt"</span> <span class="comment">//这种做法是为了调用包里的init函数</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<h3 id="包的init函数"><a href="#包的init函数" class="headerlink" title="包的init函数"></a>包的init函数</h3><p>每个包都可以有任意多个init函数，这些init函数都会在main函数之前执行。init函数通常用来做初始化变量、设置包或者其他需要在程序执行前的引导工作。比如上面我们讲的需要使用<code>_</code>空标志符来导入一个包的目的，就是想执行这个包里的init函数。</p>
<p>我们以数据库的驱动为例，Go语言为了统一关于数据库的访问，使用<code>databases/sql</code>抽象了一层数据库的操作，可以满足我们操作MYSQL、Postgre等数据库，这样不管我们使用这些数据库的哪个驱动，编码操作都是一样的，想换驱动的时候，就可以直接换掉，而不用修改具体的代码。<br>这些数据库驱动的实现，就是具体的，可以由任何人实现的，它的原理就是定义了init函数，在程序运行之前，把实现好的驱动注册到sql包里，这样我们就使用使用它操作数据库了。</p>
<blockquote>
<p>导入包会先执行包里的init函数</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> mysql</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"database/sql"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	sql.Register(<span class="string">"mysql"</span>, &amp;MySQLDriver&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为我们只是想执行这个mysql包的init方法，并不想使用这个包，所以我们在导入这个包的时候，需要使用<code>_</code>重命名包名，避免编译错误。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"database/sql"</span></span><br><span class="line"><span class="keyword">import</span> _ <span class="string">"github.com/go-sql-driver/mysql"</span></span><br><span class="line"></span><br><span class="line">db, err := sql.Open(<span class="string">"mysql"</span>, <span class="string">"user:password@/dbname"</span>)</span><br></pre></td></tr></table></figure></p>
<p>看非常简洁，剩下针对的数据库的操作，都是使用的<code>database/sql</code>标准接口，如果我们想换一个mysql的驱动的话，只需要换个导入就可以了，灵活方便，这也是面向接口编程的便利。</p>
<h3 id="包的调用"><a href="#包的调用" class="headerlink" title="包的调用"></a>包的调用</h3><h4 id="不同目录的包的调用"><a href="#不同目录的包的调用" class="headerlink" title="不同目录的包的调用"></a>不同目录的包的调用</h4><p>1.调用不同包里面的函数，格式：<code>包名.函数名()</code><br>2.调用别的包的函数，这个包函数名字如果首字母是小写则无法调用，只能调用首字母大写的(public)。</p>
<h4 id="实例1-3"><a href="#实例1-3" class="headerlink" title="实例1"></a>实例1</h4><p>调用别的目录下的包完成函数的加。<br>建立以下文件：</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/文件结构.png">
</center>

<p>main.go代码：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"test"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	a := test.Add(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">	fmt.Println(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>test.go代码：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>需要配置project的GOPATH。例如project在<code>D:\Go_code</code>,则配置：</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/GOPATH.png">
</center>

<h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><p>指针声明格式如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> var_name *<span class="keyword">var</span>-<span class="keyword">type</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ip *<span class="keyword">int</span>        <span class="comment">/* 指向整型*/</span></span><br><span class="line"><span class="keyword">var</span> fp *<span class="keyword">float32</span>    <span class="comment">/* 指向浮点型 */</span></span><br></pre></td></tr></table></figure></p>
<p>例1：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">  <span class="comment">//*b := &amp;a   //这是错误的，自动推导不需要加*，b := &amp;a即可</span></span><br><span class="line">	<span class="keyword">var</span> ip *<span class="keyword">int</span> = &amp;a</span><br><span class="line">	fmt.Printf(<span class="string">"address of a is %v\n"</span>,&amp;a)</span><br><span class="line">	fmt.Printf(<span class="string">"address of ip is %v\n"</span>,&amp;ip)</span><br><span class="line">	fmt.Printf(<span class="string">"ip is %d\n"</span>,*ip)</span><br><span class="line">	*ip = <span class="number">20</span></span><br><span class="line">	fmt.Printf(<span class="string">"ip is %d\n"</span>,*ip)</span><br><span class="line">	fmt.Printf(<span class="string">"type of ip is %T\n"</span>,ip) <span class="comment">//ip是一个int型指针</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of *ip is %d\n"</span>,*ip) <span class="comment">//*ip指向a，a的类型是int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">address of a is <span class="number">0xc0000120a8</span></span><br><span class="line">address of ip is <span class="number">0xc000006028</span></span><br><span class="line">ip is <span class="number">10</span></span><br><span class="line">ip is <span class="number">20</span></span><br><span class="line"><span class="keyword">type</span> of ip is *<span class="keyword">int</span></span><br><span class="line"><span class="keyword">type</span> of *ip is <span class="keyword">int</span></span><br></pre></td></tr></table></figure></p>
<h2 id="new和make"><a href="#new和make" class="headerlink" title="new和make"></a>new和make</h2><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">new</span>(Type) *Type</span><br></pre></td></tr></table></figure>
<p>其中：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>Type表示类型，<span class="built_in">new</span>函数只接受一个参数，这个参数是一个类型</span><br><span class="line"><span class="number">2.</span>*Type表示类型指针，<span class="built_in">new</span>函数返回一个指向该类型内存地址的指针。</span><br></pre></td></tr></table></figure></p>
<p>new函数不太常用，使用new函数得到的是一个类型的指针，并且该指针对应的值为该类型的零值。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p *<span class="keyword">int</span>   <span class="comment">//go不初始化默认是nil，没有NULL类型</span></span><br><span class="line">	fmt.Println(<span class="string">"p = "</span>,p)  <span class="comment">//p =  &lt;nil&gt;</span></span><br><span class="line">	<span class="comment">//*p = 666  //err,因为p没有合法指向</span></span><br><span class="line">	<span class="keyword">var</span> v <span class="keyword">int</span></span><br><span class="line">	p = &amp;v</span><br><span class="line">	*p = <span class="number">20</span></span><br><span class="line">	fmt.Println(*p) <span class="comment">//20</span></span><br><span class="line">	q := <span class="built_in">new</span>(<span class="keyword">int</span>)  <span class="comment">//动态分配空间，go语言不需要释放，有自动的垃圾回收</span></span><br><span class="line">	*q = <span class="number">123</span></span><br><span class="line">	fmt.Println(*q) <span class="comment">//123</span></span><br><span class="line"></span><br><span class="line">	a := <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">	b := <span class="built_in">new</span>(<span class="keyword">bool</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, a) <span class="comment">// *int</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, b) <span class="comment">// *bool</span></span><br><span class="line">	fmt.Println(*a)       <span class="comment">// 0</span></span><br><span class="line">	fmt.Println(*b)       <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p>make也是用于内存分配的，区别于new，它只用于slice、map以及chan的内存创建，而且它返回的类型就是这三个类型本身，而不是他们的指针类型，因为这三种类型就是引用类型，所以就没有必要返回他们的指针了。<br>make函数是无可替代的，我们在使用slice、map以及channel的时候，都需要使用make进行初始化，然后才可以对它们进行操作。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> b <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></span><br><span class="line">    b = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">    b[<span class="string">"测试"</span>] = <span class="number">100</span></span><br><span class="line">    fmt.Println(b) <span class="comment">//输出：map[测试:100]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="new和make区别"><a href="#new和make区别" class="headerlink" title="new和make区别"></a>new和make区别</h3><p>1.二者都是用来做内存分配的。<br>2.make只用于slice、map以及channel的初始化，返回的还是这三个引用类型本身；<br>3.而new用于类型的内存分配，并且内存对应的值为类型零值，返回的是指向类型的指针。</p>
<h2 id="普通变量做函数参数"><a href="#普通变量做函数参数" class="headerlink" title="普通变量做函数参数"></a>普通变量做函数参数</h2><p>交换两个变量的值：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swap</span><span class="params">(a, b *<span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	*a , *b = *b, *a  <span class="comment">//用*a,*b来访问main中变量</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := <span class="number">20</span></span><br><span class="line">	swap(&amp;a, &amp;b)   <span class="comment">//取a，b变量的地址给函数</span></span><br><span class="line">	fmt.Println(a,b) <span class="comment">//打印结果：20 10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="数组指针做函数"><a href="#数组指针做函数" class="headerlink" title="数组指针做函数"></a>数组指针做函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify</span><span class="params">(a *[5] <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">	a[<span class="number">0</span>] = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := [<span class="number">5</span>]<span class="keyword">int</span> &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">	modify(&amp;a)</span><br><span class="line">	fmt.Println(a) <span class="comment">//输出：[2 2 3 4 5]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="声明数组"><a href="#声明数组" class="headerlink" title="声明数组"></a>声明数组</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> variable_name [SIZE] variable_type</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> balance [<span class="number">10</span>] <span class="keyword">float32</span> <span class="comment">//数组 balance 长度为 10,类型为 float32</span></span><br><span class="line"><span class="comment">//数组定义元素个数必须是常量</span></span><br><span class="line"><span class="comment">//n := 10</span></span><br><span class="line"><span class="comment">//var a[n] int  //这样是错误的声明</span></span><br></pre></td></tr></table></figure>
<h2 id="初始化数组-声明定义同时赋值，叫初始化"><a href="#初始化数组-声明定义同时赋值，叫初始化" class="headerlink" title="初始化数组(声明定义同时赋值，叫初始化)"></a>初始化数组(声明定义同时赋值，叫初始化)</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全部初始化</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">5</span>]<span class="keyword">int</span> = [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">a := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="comment">//初始化数组中 &#123;&#125; 中的元素个数不能大于 [] 中的数字。</span></span><br><span class="line"><span class="comment">//如果忽略 [] 中的数字不设置数组大小，Go 语言会根据元素的个数来设置数组的大小：</span></span><br><span class="line"><span class="keyword">var</span> a = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//部分初始化，没有初始化的变量，自动赋值为0</span></span><br><span class="line">c:= [<span class="number">5</span>] <span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">fmt.Println(d)  <span class="comment">//打印结果：[1 2 3 0 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//指定某个元素初始化</span></span><br><span class="line">d := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>:<span class="number">10</span>, <span class="number">4</span>:<span class="number">20</span>&#125;</span><br><span class="line">fmt.Println(d) <span class="comment">//打印结果：[0 0 10 0 20]</span></span><br></pre></td></tr></table></figure>
<h2 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h2><p>二维数组是最简单的多维数组，二维数组本质上是由一维数组组成的。<br>二维数组可认为是一个表格，x 为行，y 为列，下图演示了一个二维数组 a 为三行四列：</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/1.jpg">
</center>

<p>二维数组中的元素可通过 <code>a[ i ][ j ]</code> 来访问。</p>
<h3 id="初始化二维数组"><a href="#初始化二维数组" class="headerlink" title="初始化二维数组"></a>初始化二维数组</h3><p>多维数组可通过大括号来初始值。以下实例为一个 3 行 4 列的二维数组：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">3</span>][<span class="number">4</span>]<span class="keyword">int</span>&#123;</span><br><span class="line"> &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; ,   <span class="comment">/*  第一行索引为 0 */</span></span><br><span class="line"> &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125; ,   <span class="comment">/*  第二行索引为 1 */</span></span><br><span class="line"> &#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125;,   <span class="comment">/* 第三行索引为 2 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：以上代码中倒数第二行的 } 必须要有逗号，因为最后一行的 } 不能单独一行，也可以写成这样：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">3</span>][<span class="number">4</span>]<span class="keyword">int</span>&#123;</span><br><span class="line"> &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; ,   <span class="comment">/*  第一行索引为 0 */</span></span><br><span class="line"> &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125; ,   <span class="comment">/*  第二行索引为 1 */</span></span><br><span class="line"> &#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125;&#125;   <span class="comment">/* 第三行索引为 2 */</span></span><br></pre></td></tr></table></figure></p>
<h3 id="访问二维数组"><a href="#访问二维数组" class="headerlink" title="访问二维数组"></a>访问二维数组</h3><p>二维数组通过指定坐标来访问。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">val := a[<span class="number">2</span>][<span class="number">3</span>]</span><br><span class="line">或</span><br><span class="line"><span class="keyword">var</span> value <span class="keyword">int</span> = a[<span class="number">2</span>][<span class="number">3</span>]  <span class="comment">//访问了二维数组 val 第三行的第四个元素。</span></span><br></pre></td></tr></table></figure></p>
<p>二维数组可以使用循环嵌套来输出元素：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">var</span> a[<span class="number">3</span>][<span class="number">4</span>] <span class="keyword">int</span></span><br><span class="line">	k := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>;i&lt;<span class="number">3</span>;i++&#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>;j&lt;<span class="number">4</span>;j++&#123;</span><br><span class="line">			k++</span><br><span class="line">			a[i][j]=k</span><br><span class="line">			fmt.Printf(<span class="string">"a[%d][%d]=%d "</span>,i,j,k)</span><br><span class="line">		&#125;</span><br><span class="line">	fmt.Println()</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"a = "</span>,a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span> a[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">2</span> a[<span class="number">0</span>][<span class="number">2</span>]=<span class="number">3</span> a[<span class="number">0</span>][<span class="number">3</span>]=<span class="number">4</span></span><br><span class="line">a[<span class="number">1.</span>][<span class="number">0</span>]=<span class="number">5</span> a[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">6</span> a[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">7</span> a[<span class="number">1</span>][<span class="number">3</span>]=<span class="number">8</span></span><br><span class="line">a[<span class="number">2</span>][<span class="number">0</span>]=<span class="number">9</span> a[<span class="number">2</span>][<span class="number">1</span>]=<span class="number">10</span> a[<span class="number">2</span>][<span class="number">2</span>]=<span class="number">11</span> a[<span class="number">2</span>][<span class="number">3</span>]=<span class="number">12</span></span><br><span class="line">a =  [[<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>] [<span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span>] [<span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span>]]</span><br></pre></td></tr></table></figure></p>
<h2 id="数组比较和赋值"><a href="#数组比较和赋值" class="headerlink" title="数组比较和赋值"></a>数组比较和赋值</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//比较的两个数组类型要一样，只支持 == 或 ！=，比较是不是每个元素都一样</span></span><br><span class="line">	a := [<span class="number">5</span>] <span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	b := [<span class="number">5</span>] <span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">	c := [<span class="number">5</span>] <span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">"a == b"</span>,a==b)  <span class="comment">//输出：a == b true</span></span><br><span class="line">	fmt.Println(<span class="string">"a == c"</span>,a==c)  <span class="comment">//输出：a == c false</span></span><br><span class="line">	<span class="comment">//同类型的数组可以赋值，只能较小长度的数组向大于等于的赋值</span></span><br><span class="line">	<span class="keyword">var</span> d [<span class="number">5</span>] <span class="keyword">int</span></span><br><span class="line">	d = c</span><br><span class="line">	fmt.Println(d)   <span class="comment">//输出：[1 2 3 0 0]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="练习-1"><a href="#练习-1" class="headerlink" title="练习"></a>练习</h2><h3 id="例1-3"><a href="#例1-3" class="headerlink" title="例1"></a>例1</h3><p>求数组所有元素之和：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// 求元素和</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sumArr</span><span class="params">(a [10]<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> sum <span class="keyword">int</span> = <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</span><br><span class="line">		sum += a[i]</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 若想做一个真正的随机数，要种子</span></span><br><span class="line">	<span class="comment">// seed()种子默认是1</span></span><br><span class="line">	<span class="comment">//rand.Seed(1)</span></span><br><span class="line">	rand.Seed(time.Now().Unix())</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> b [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(b); i++ &#123;</span><br><span class="line">		<span class="comment">// 产生一个0到1000随机数</span></span><br><span class="line">		b[i] = rand.Intn(<span class="number">1000</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	sum := sumArr(b)</span><br><span class="line">	fmt.Printf(<span class="string">"sum=%d\n"</span>, sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="例2-2"><a href="#例2-2" class="headerlink" title="例2"></a>例2</h3><p>找出数组中和为给定值的两个元素的下标，例如数组[1,3,5,8,7]，找出两个元素之和等于8的下标分别是（0，4）和（1，2）<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 求元素和，是给定的值</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myTest</span><span class="params">(a [5]<span class="keyword">int</span>, target <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 遍历数组</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</span><br><span class="line">		other := target - a[i]</span><br><span class="line">		<span class="comment">// 继续遍历</span></span><br><span class="line">		<span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; <span class="built_in">len</span>(a); j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> a[j] == other &#123;</span><br><span class="line">				fmt.Printf(<span class="string">"(%d,%d)\n"</span>, i, j)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">7</span>&#125;</span><br><span class="line">	myTest(b, <span class="number">8</span>) <span class="comment">// 找出两个元素之和等于8的下标</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运算结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<h1 id="切片-slice"><a href="#切片-slice" class="headerlink" title="切片(slice)"></a>切片(slice)</h1><p>slice 并不是数组或数组指针。它通过内部指针和相关属性引用数组片段，以实现变长方案。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 切片：切片是数组的一个引用，因此切片是引用类型。但自身是结构体，值拷贝传递。</span><br><span class="line"><span class="number">2.</span> 切片的长度可以改变，因此，切片是一个可变的数组。</span><br><span class="line"><span class="number">3.</span> 切片遍历方式和数组一样，可以用<span class="built_in">len</span>()求长度。表示可用元素数量，读写操作不能超过该限制。</span><br><span class="line"><span class="number">4.</span> <span class="built_in">cap</span>可以求出slice最大扩张容量，不能超出数组限制。<span class="number">0</span> &lt;= <span class="built_in">len</span>(slice) &lt;= <span class="built_in">len</span>(array)，其中array是slice引用的数组。</span><br><span class="line"><span class="number">5.</span> 切片的定义：<span class="keyword">var</span> 变量名 []类型，比如 <span class="keyword">var</span> str []<span class="keyword">string</span>  <span class="keyword">var</span> arr []<span class="keyword">int</span>。</span><br><span class="line"><span class="number">6.</span> 如果 slice == <span class="literal">nil</span>，那么 <span class="built_in">len</span>、<span class="built_in">cap</span> 结果都等于 <span class="number">0</span>。</span><br></pre></td></tr></table></figure></p>
<p>下面我们来通过一张图来更好的理解切片：</p>
<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="/2020/01/10/Golang%E5%9F%BA%E7%A1%80/3.png">
</center>

<h2 id="切片的创建和初始化"><a href="#切片的创建和初始化" class="headerlink" title="切片的创建和初始化"></a>切片的创建和初始化</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//通过append给切片末尾追加一个成员</span></span><br><span class="line">	s := []<span class="keyword">int</span>&#123;&#125;  <span class="comment">//这是一个切片</span></span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d\n"</span>,<span class="built_in">len</span>(s),<span class="built_in">cap</span>(s))  <span class="comment">//因为没有元素，所以输出:len = 0, cap = 0</span></span><br><span class="line">	s = <span class="built_in">append</span>(s,<span class="number">11</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d\n"</span>,<span class="built_in">len</span>(s),<span class="built_in">cap</span>(s))  <span class="comment">//输出：len = 1, cap = 1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建和初始化切片：</span></span><br><span class="line">	<span class="comment">//1.从数组创建切片</span></span><br><span class="line">	a := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;  <span class="comment">//数组</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>,a) <span class="comment">//输出：[]int</span></span><br><span class="line">	s1 := a[:<span class="number">3</span>:<span class="number">5</span>]               <span class="comment">//切片</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>,s1) <span class="comment">//输出：[]int。所以可以看到切片和数组具有同样的类型</span></span><br><span class="line">	fmt.Println(<span class="string">"s1 = "</span>, s1)   <span class="comment">//输出：s1 =  [1 2 3]</span></span><br><span class="line">	fmt.Println(<span class="string">"len(s1) = "</span>, <span class="built_in">len</span>(s1))  <span class="comment">//len = 3 - 0,输出：len(s1) =  3</span></span><br><span class="line">	fmt.Println(<span class="string">"cap(s1) = "</span>, <span class="built_in">cap</span>(s1))  <span class="comment">//cap = 5 - 0,输出：cap(s1) =  5</span></span><br><span class="line">	<span class="comment">//2.自动推导类型，同时初始化</span></span><br><span class="line">	s2 := []<span class="keyword">int</span> &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">	fmt.Println(s2)</span><br><span class="line">	<span class="comment">//3.通过make()函数，格式 make(切片类型，长度，容量)</span></span><br><span class="line">	s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d\n"</span>,<span class="built_in">len</span>(s3),<span class="built_in">cap</span>(s3)) <span class="comment">//输出：len = 5, cap = 10</span></span><br><span class="line">	s4 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, )  <span class="comment">//没有指定容量，则容量和长度一样</span></span><br><span class="line">	fmt.Printf(<span class="string">"len = %d, cap = %d\n"</span>,<span class="built_in">len</span>(s4),<span class="built_in">cap</span>(s4)) <span class="comment">//输出：len = 5, cap = 5</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="切片和底层数组的关系"><a href="#切片和底层数组的关系" class="headerlink" title="切片和底层数组的关系"></a>切片和底层数组的关系</h2><p>数组是值传递，切片是引用传递。</p>
<h3 id="超出原-slice-cap-限制"><a href="#超出原-slice-cap-限制" class="headerlink" title="超出原 slice.cap 限制"></a>超出原 slice.cap 限制</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//超出原 slice.cap 限制，就会重新分配底层数组，即便原数组并未填满。</span></span><br><span class="line">	data := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">10</span>: <span class="number">0</span>&#125;</span><br><span class="line">	s := data[:<span class="number">2</span>:<span class="number">3</span>]</span><br><span class="line">	fmt.Println(s)</span><br><span class="line">	fmt.Println(&amp;s[<span class="number">0</span>], &amp;data[<span class="number">0</span>])</span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">100</span>, <span class="number">200</span>) <span class="comment">// 一次 append 两个值，超出 s.cap 限制。</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(s)         <span class="comment">// 重新分配底层数组，与原数组无关。</span></span><br><span class="line">	fmt.Println(data)</span><br><span class="line">	fmt.Println(&amp;s[<span class="number">0</span>], &amp;data[<span class="number">0</span>]) <span class="comment">// 比对底层数组起始指针。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span> <span class="number">1</span>]</span><br><span class="line"><span class="number">0xc00001a0c0</span> <span class="number">0xc00001a0c0</span>  <span class="comment">//slice指向原底层数组</span></span><br><span class="line">[<span class="number">0</span> <span class="number">1</span> <span class="number">100</span> <span class="number">200</span>]</span><br><span class="line">[<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]</span><br><span class="line"><span class="number">0xc00000c330</span> <span class="number">0xc00001a0c0</span>  <span class="comment">//可以发现底层数组发生了改变</span></span><br></pre></td></tr></table></figure></p>
<p>从输出结果可以看出，append 后的 s 重新分配了底层数组，并复制数据。如果只追加一个值，则不会超过 s.cap 限制，也就不会重新分配。 <strong>通常以2倍容量重新分配底层数组。</strong> 在大批量添加数据时，建议一次性分配足够大的空间，以减少内存分配和数据复制开销。</p>
<h3 id="slice中cap重新分配规律"><a href="#slice中cap重新分配规律" class="headerlink" title="slice中cap重新分配规律"></a>slice中cap重新分配规律</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	s := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">	c := <span class="built_in">cap</span>(s)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">50</span>; i++ &#123;</span><br><span class="line">		s = <span class="built_in">append</span>(s, i)  <span class="comment">//当容量不够时两倍扩容</span></span><br><span class="line">		<span class="keyword">if</span> n := <span class="built_in">cap</span>(s); n &gt; c &#123;</span><br><span class="line">			fmt.Printf(<span class="string">"cap: %d -&gt; %d\n"</span>, c, n)</span><br><span class="line">			c = n</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cap</span>: <span class="number">1</span> -&gt; <span class="number">2</span>   <span class="comment">//可以看到cap以2为指数增长</span></span><br><span class="line"><span class="built_in">cap</span>: <span class="number">2</span> -&gt; <span class="number">4</span></span><br><span class="line"><span class="built_in">cap</span>: <span class="number">4</span> -&gt; <span class="number">8</span></span><br><span class="line"><span class="built_in">cap</span>: <span class="number">8</span> -&gt; <span class="number">16</span></span><br><span class="line"><span class="built_in">cap</span>: <span class="number">16</span> -&gt; <span class="number">32</span></span><br><span class="line"><span class="built_in">cap</span>: <span class="number">32</span> -&gt; <span class="number">64</span></span><br></pre></td></tr></table></figure></p>
<h2 id="切片拷贝"><a href="#切片拷贝" class="headerlink" title="切片拷贝"></a>切片拷贝</h2><p>copy ：函数 copy 在两个 slice 间复制数据，复制长度以 len 小的为准。两个 slice 可指向同一底层数组，允许元素区间重叠。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	data := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">"array data : "</span>, data)</span><br><span class="line">	s1 := data[<span class="number">8</span>:]</span><br><span class="line">	s2 := data[:<span class="number">5</span>]</span><br><span class="line">	fmt.Printf(<span class="string">"slice s1 : %v\n"</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">"slice s2 : %v\n"</span>, s2)</span><br><span class="line">	<span class="built_in">copy</span>(s2, s1)</span><br><span class="line">	fmt.Printf(<span class="string">"copied slice s1 : %v\n"</span>, s1)</span><br><span class="line">	fmt.Printf(<span class="string">"copied slice s2 : %v\n"</span>, s2)</span><br><span class="line">	fmt.Println(<span class="string">"last array data : "</span>, data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array data :  [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]</span><br><span class="line">slice s1 : [<span class="number">8</span> <span class="number">9</span>]</span><br><span class="line">slice s2 : [<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line">copied slice s1 : [<span class="number">8</span> <span class="number">9</span>]</span><br><span class="line">copied slice s2 : [<span class="number">8</span> <span class="number">9</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line">last array data :  [<span class="number">8</span> <span class="number">9</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span>]</span><br></pre></td></tr></table></figure></p>
<p>应及时将所需数据 copy 到较小的 slice，以便释放超大号底层数组内存。</p>
<h2 id="字符串和切片"><a href="#字符串和切片" class="headerlink" title="字符串和切片"></a>字符串和切片</h2><p>string底层就是一个byte的数组，因此，也可以进行切片操作。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="string">"hello world"</span></span><br><span class="line">	s1 := str[:<span class="number">5</span>]</span><br><span class="line">	fmt.Println(s1)  <span class="comment">//输出：hello</span></span><br><span class="line">	s2 := str[<span class="number">6</span>:]</span><br><span class="line">	fmt.Println(s2)  <span class="comment">//输出：world</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>string本身是不可变的，因此要改变string中字符。需要如下操作:</p>
<blockquote>
<p>Go语言的字符有以下两种：<br>一种是 uint8 类型，或者叫 byte 型，代表了 ASCII 码的一个字符。<br>另一种是 rune 类型，代表一个 UTF-8 字符，当需要处理中文、日文或者其他复合字符时，则需要用到 rune 类型。rune 类型等价于 int32 类型。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//英文字符串：</span></span><br><span class="line">	str := <span class="string">"hello world"</span></span><br><span class="line">	s := []<span class="keyword">byte</span>(str)</span><br><span class="line">	s[<span class="number">6</span>] = <span class="string">'g'</span></span><br><span class="line">	s[<span class="number">7</span>] = <span class="string">'o'</span></span><br><span class="line">	s = s[:<span class="number">8</span>]</span><br><span class="line">	s = <span class="built_in">append</span>(s,<span class="string">'!'</span>)</span><br><span class="line">	str = <span class="keyword">string</span>(s)</span><br><span class="line">	fmt.Println(str)  <span class="comment">//输出:hello go!</span></span><br><span class="line">	<span class="comment">//含有中文字符串：</span></span><br><span class="line">	str1 := <span class="string">"你好，世界！hello world"</span></span><br><span class="line">	s1 := []<span class="keyword">rune</span>(str1)</span><br><span class="line">	s1[<span class="number">3</span>] = <span class="string">'明'</span></span><br><span class="line">	s1[<span class="number">4</span>] = <span class="string">'天'</span></span><br><span class="line">	s1[<span class="number">12</span>] = <span class="string">'g'</span></span><br><span class="line">	s1[<span class="number">13</span>] = <span class="string">'o'</span></span><br><span class="line">	s1 = s1[:<span class="number">14</span>]</span><br><span class="line">	str1 = <span class="keyword">string</span>(s1)</span><br><span class="line">	fmt.Println(str1) <span class="comment">//输出：你好，明天！hello go</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="利用切片实现猜数字游戏"><a href="#利用切片实现猜数字游戏" class="headerlink" title="利用切片实现猜数字游戏"></a>利用切片实现猜数字游戏</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateNum</span><span class="params">(p *<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().Unix())</span><br><span class="line">	<span class="keyword">var</span> num <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		num = rand.Intn(<span class="number">10000</span>)</span><br><span class="line">		<span class="keyword">if</span> num &gt; <span class="number">1000</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	*p = num</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetNum</span><span class="params">(s []<span class="keyword">int</span>, num <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	s[<span class="number">0</span>] = num/<span class="number">1000</span></span><br><span class="line">	s[<span class="number">1</span>] = num%<span class="number">1000</span>/<span class="number">100</span></span><br><span class="line">	s[<span class="number">2</span>] = num%<span class="number">100</span>/<span class="number">10</span></span><br><span class="line">	s[<span class="number">3</span>] = num%<span class="number">10</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">OnGame</span><span class="params">(randSlice []<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line">	<span class="keyword">var</span> num <span class="keyword">int</span></span><br><span class="line">	keySlice := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>&#123;</span><br><span class="line">			fmt.Println(<span class="string">"请输入一个4位数："</span>)</span><br><span class="line">			fmt.Scan(&amp;num)</span><br><span class="line">			<span class="keyword">if</span> <span class="number">999</span> &lt; num &amp;&amp; num &lt;<span class="number">10000</span> &#123;</span><br><span class="line">				<span class="keyword">break</span></span><br><span class="line">			&#125;</span><br><span class="line">			fmt.Println(<span class="string">"输入的数不符合要求"</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		GetNum(keySlice, num)</span><br><span class="line">		n := <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt;<span class="number">4</span>; i++ &#123;</span><br><span class="line">			<span class="keyword">if</span> keySlice[i] &gt;randSlice[i] &#123;</span><br><span class="line">				fmt.Printf(<span class="string">"第%d位大了"</span>,i+<span class="number">1</span>)</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span> keySlice[i] &lt; randSlice[i] &#123;</span><br><span class="line">				fmt.Printf(<span class="string">"第%d位小了"</span>,i+<span class="number">1</span>)</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				fmt.Printf(<span class="string">"第%d位猜对了"</span>, i+<span class="number">1</span>)</span><br><span class="line">				n ++</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> n == <span class="number">4</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">"全部猜对。"</span>)</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> randNum <span class="keyword">int</span></span><br><span class="line">	<span class="comment">//产生一个4位随机数</span></span><br><span class="line">	CreateNum(&amp;randNum)</span><br><span class="line">	<span class="comment">//取出每一位树</span></span><br><span class="line">	randSlice := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)</span><br><span class="line">	<span class="comment">//保存数的每一位</span></span><br><span class="line">	GetNum(randSlice,randNum)</span><br><span class="line">	<span class="comment">//输入一个4位数并读取每一位</span></span><br><span class="line">	OnGame(randSlice)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><p>map是一种<strong>无序的</strong>基于key-value的数据结构，Go语言中的map是引用类型，必须初始化才能使用。map中的数据都是成对出现的。<br>因为无序，所以我们无法确定它的返回顺序，所以每次打印的结果有可能顺序也不同。<br>在一个map里所有的键都是<strong>唯一</strong>的，而且必须支持<code>==</code>和<code>!=</code>操作符类型，<strong>切片、函数以及包含切片的结构类型这些类型由于具有引用语义，所以不能作为键</strong>。<br>map的定义语法如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">map</span>[KeyType]ValueType</span><br><span class="line"></span><br><span class="line">KeyType:表示键的类型。</span><br><span class="line">ValueType:表示键对应的值的类型。</span><br></pre></td></tr></table></figure></p>
<p>map类型的变量默认初始值为nil，需要使用make()函数来分配内存。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">map</span>[KeyType]ValueType, [<span class="built_in">cap</span>])</span><br></pre></td></tr></table></figure></p>
<p>其中cap表示map的容量，该参数虽然不是必须的，但是我们应该在初始化map的时候就为其指定一个合适的容量。</p>
<h2 id="map的基本使用"><a href="#map的基本使用" class="headerlink" title="map的基本使用"></a>map的基本使用</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">8</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"李四"</span>] = <span class="number">100</span></span><br><span class="line">	fmt.Println(scoreMap)  <span class="comment">//输出：map[张三:90 李四:100]</span></span><br><span class="line">	fmt.Println(scoreMap[<span class="string">"张三"</span>]) <span class="comment">//输出：90</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of map is %T\n"</span>,scoreMap) <span class="comment">//输出：type of map is map[string]int</span></span><br><span class="line">	<span class="comment">//map也支持在声明的时候填充元素</span></span><br><span class="line">	userInfo := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span> &#123;</span><br><span class="line">		<span class="string">"username"</span>:<span class="string">"root"</span>,</span><br><span class="line">		<span class="string">"password"</span>:<span class="string">"admin"</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(userInfo) <span class="comment">//输出:map[password:admin username:root]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="判断某个键是否存在"><a href="#判断某个键是否存在" class="headerlink" title="判断某个键是否存在"></a>判断某个键是否存在</h2><p>Go语言中有个判断map中键是否存在的特殊写法：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := <span class="keyword">map</span>[key]</span><br></pre></td></tr></table></figure></p>
<p>举个例子：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>] <span class="keyword">int</span>)</span><br><span class="line">	scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">	scoreMap[<span class="string">"李四"</span>] = <span class="number">100</span></span><br><span class="line">	<span class="comment">//如果key存在ok为true，v为对应的值，不存在ok为false，v为值类型的零值</span></span><br><span class="line">	v,ok := scoreMap[<span class="string">"张三"</span>]</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		fmt.Println(v)  <span class="comment">//输出：90</span></span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"无"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="map的遍历"><a href="#map的遍历" class="headerlink" title="map的遍历"></a>map的遍历</h2><p>Go语言中使用for range遍历map。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">    scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">    scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">    scoreMap[<span class="string">"王五"</span>] = <span class="number">60</span></span><br><span class="line">    <span class="keyword">for</span> k, v := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">        fmt.Println(k, v)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//当我们只想遍历key的时候，可以按下面的写法：</span></span><br><span class="line">    <span class="keyword">for</span> k := <span class="keyword">range</span> scoreMap &#123; <span class="comment">//利用匿名变量</span></span><br><span class="line">        fmt.Println(k)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="map的删除"><a href="#map的删除" class="headerlink" title="map的删除"></a>map的删除</h2><p>使用delete()内建函数从map中删除一组键值对，delete()函数的格式如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">delete</span>(<span class="keyword">map</span>, key)</span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span>:表示要删除的键值对的<span class="keyword">map</span>的id</span><br><span class="line">key:表示要删除的键值对的键</span><br></pre></td></tr></table></figure></p>
<p>示例代码：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">    scoreMap[<span class="string">"张三"</span>] = <span class="number">90</span></span><br><span class="line">    scoreMap[<span class="string">"小明"</span>] = <span class="number">100</span></span><br><span class="line">    scoreMap[<span class="string">"王五"</span>] = <span class="number">60</span></span><br><span class="line">    <span class="built_in">delete</span>(scoreMap, <span class="string">"小明"</span>)<span class="comment">//将小明:100从map中删除</span></span><br><span class="line">    <span class="keyword">for</span> k,v := <span class="keyword">range</span> scoreMap&#123;</span><br><span class="line">        fmt.Println(k, v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="按照指定顺序遍历map"><a href="#按照指定顺序遍历map" class="headerlink" title="按照指定顺序遍历map"></a>按照指定顺序遍历map</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"sort"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano()) <span class="comment">//初始化随机数种子</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> scoreMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">		key := fmt.Sprintf(<span class="string">"stu%02d"</span>, i) <span class="comment">//生成stu开头的字符串</span></span><br><span class="line">		value := rand.Intn(<span class="number">100</span>)          <span class="comment">//生成0~99的随机整数</span></span><br><span class="line">		scoreMap[key] = value</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//取出map中的所有key存入切片keys</span></span><br><span class="line">	<span class="keyword">var</span> keys = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, <span class="number">200</span>)</span><br><span class="line">	<span class="keyword">for</span> key := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">		keys = <span class="built_in">append</span>(keys, key)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//对切片进行排序</span></span><br><span class="line">	sort.Strings(keys)</span><br><span class="line">	<span class="comment">//按照排序后的key遍历map</span></span><br><span class="line">	<span class="keyword">for</span> _, key := <span class="keyword">range</span> keys &#123;</span><br><span class="line">		fmt.Println(key, scoreMap[key])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="元素为map类型的切片"><a href="#元素为map类型的切片" class="headerlink" title="元素为map类型的切片"></a>元素为map类型的切片</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> mapSlice = <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"index:%d value:%v\n"</span>, index, value)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"after init"</span>)</span><br><span class="line">	<span class="comment">// 对切片中的map元素进行初始化</span></span><br><span class="line">	mapSlice[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">	mapSlice[<span class="number">0</span>][<span class="string">"name"</span>] = <span class="string">"王五"</span></span><br><span class="line">	mapSlice[<span class="number">0</span>][<span class="string">"password"</span>] = <span class="string">"123456"</span></span><br><span class="line">	mapSlice[<span class="number">0</span>][<span class="string">"address"</span>] = <span class="string">"红旗大街"</span></span><br><span class="line">	<span class="keyword">for</span> index, value := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">		fmt.Printf(<span class="string">"index:%d value:%v\n"</span>, index, value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">index:<span class="number">0</span> value:<span class="keyword">map</span>[]</span><br><span class="line">index:<span class="number">1</span> value:<span class="keyword">map</span>[]</span><br><span class="line">index:<span class="number">2</span> value:<span class="keyword">map</span>[]</span><br><span class="line">after init</span><br><span class="line">index:<span class="number">0</span> value:<span class="keyword">map</span>[address:红旗大街 name:王五 password:<span class="number">123456</span>]</span><br><span class="line">index:<span class="number">1</span> value:<span class="keyword">map</span>[]</span><br><span class="line">index:<span class="number">2</span> value:<span class="keyword">map</span>[]</span><br></pre></td></tr></table></figure></p>
<h2 id="值为切片类型的map"><a href="#值为切片类型的map" class="headerlink" title="值为切片类型的map"></a>值为切片类型的map</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> sliceMap = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">	fmt.Println(sliceMap)</span><br><span class="line">	fmt.Println(<span class="string">"after init"</span>)</span><br><span class="line">	key := <span class="string">"中国"</span></span><br><span class="line">	value, ok := sliceMap[key]</span><br><span class="line">	<span class="keyword">if</span> !ok &#123;</span><br><span class="line">		value = <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	value = <span class="built_in">append</span>(value, <span class="string">"北京"</span>, <span class="string">"上海"</span>)</span><br><span class="line">	sliceMap[key] = value</span><br><span class="line">	fmt.Println(sliceMap)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">map</span>[]</span><br><span class="line">after init</span><br><span class="line"><span class="keyword">map</span>[中国:[北京 上海]]</span><br></pre></td></tr></table></figure></p>
<h1 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h1><p>Go语言中没有“类”的概念，也不支持“类”的继承等面向对象的概念。Go语言中通过结构体的内嵌再配合接口比面向对象具有更高的扩展性和灵活性。</p>
<h2 id="类型别名和自定义类型"><a href="#类型别名和自定义类型" class="headerlink" title="类型别名和自定义类型"></a>类型别名和自定义类型</h2><h3 id="自定义类型"><a href="#自定义类型" class="headerlink" title="自定义类型"></a>自定义类型</h3><p>Go语言中可以使用type关键字来定义自定义类型，自定义类型是定义了一个全新的类型。我们可以基于内置的基本类型定义，也可以通过struct定义。例如：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将MyInt定义为int类型</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br></pre></td></tr></table></figure></p>
<p>通过Type关键字的定义，MyInt就是一种新的类型，它具有int的特性。</p>
<h3 id="类型别名-1"><a href="#类型别名-1" class="headerlink" title="类型别名"></a>类型别名</h3><p>类型别名规定：TypeAlias只是Type的别名，本质上TypeAlias与Type是同一个类型。就像一个孩子小时候有小名、乳名，上学后用学名，英语老师又会给他起英文名，但这些名字都指的是他本人。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TypeAlias = Type</span><br></pre></td></tr></table></figure></p>
<p>我们之前见过的rune和byte就是类型别名，他们的定义如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">byte</span> = <span class="keyword">uint8</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">rune</span> = <span class="keyword">int32</span></span><br></pre></td></tr></table></figure></p>
<h3 id="类型定义和类型别名的区别"><a href="#类型定义和类型别名的区别" class="headerlink" title="类型定义和类型别名的区别"></a>类型定义和类型别名的区别</h3><p>类型别名与类型定义表面上看只有一个等号的差异，我们通过下面的这段代码来理解它们之间的区别。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="comment">//类型定义</span></span><br><span class="line"><span class="keyword">type</span> NewInt <span class="keyword">int</span></span><br><span class="line"><span class="comment">//类型别名</span></span><br><span class="line"><span class="keyword">type</span> MyInt = <span class="keyword">int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> a NewInt</span><br><span class="line">	<span class="keyword">var</span> b MyInt</span><br><span class="line">	fmt.Printf(<span class="string">"type of a is %T\n"</span>,a)  <span class="comment">//type of a is main.NewInt</span></span><br><span class="line">	fmt.Printf(<span class="string">"type of b is %T\n"</span>,b)  <span class="comment">//type of b is int</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果显示a的类型是main.NewInt，表示main包下定义的NewInt类型。b的类型是int。MyInt类型只会在代码中存在，编译完成时并不会有MyInt类型。</p>
<h2 id="结构体-1"><a href="#结构体-1" class="headerlink" title="结构体"></a>结构体</h2><p>Go语言中的基础数据类型可以表示一些事物的基本属性，但是当我们想表达一个事物的全部或部分属性时，这时候再用单一的基本数据类型明显就无法满足需求了，Go语言提供了一种自定义数据类型，可以<strong>封装多个基本数据类型</strong>，这种数据类型叫结构体，英文名称struct。 也就是我们可以通过struct来定义自己的类型了。<br>Go语言中通过struct来实现面向对象。</p>
<h3 id="结构体的定义"><a href="#结构体的定义" class="headerlink" title="结构体的定义"></a>结构体的定义</h3><p>使用type和struct关键字来定义结构体，具体代码格式如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 类型名 <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="comment">//类型名：标识自定义结构体的名称，在同一个包内不能重复。</span></span><br><span class="line">    <span class="comment">//字段名：表示结构体字段名。结构体中的字段名必须唯一。</span></span><br><span class="line">    <span class="comment">//字段类型：表示结构体字段的具体类型</span></span><br><span class="line">    字段名 字段类型</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    …</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>举个例子，我们定义一个Person结构体，代码如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">    name <span class="keyword">string</span></span><br><span class="line">    city <span class="keyword">string</span></span><br><span class="line">    age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>同样类型的字段也可以写在一行:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person1 <span class="keyword">struct</span> &#123;</span><br><span class="line">    name, city <span class="keyword">string</span></span><br><span class="line">    age        <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样我们就拥有了一个person的自定义类型，它有name、city、age三个字段，分别表示姓名、城市和年龄。这样我们使用这个person结构体就能够很方便的在程序中表示和存储人信息了。<br>语言内置的基础数据类型是用来描述一个值的，而结构体是用来描述一组值的。比如一个人有名字、年龄和居住城市等，本质上是一种聚合型的数据类型。</p>
<h3 id="结构体实例化"><a href="#结构体实例化" class="headerlink" title="结构体实例化"></a>结构体实例化</h3><p>只有当结构体实例化时，才会真正地分配内存。也就是必须实例化后才能使用结构体的字段。<br>结构体本身也是一种类型，我们可以像声明内置类型一样使用var关键字声明结构体类型。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 结构体实例 结构体类型</span><br></pre></td></tr></table></figure></p>
<h4 id="基本实例化"><a href="#基本实例化" class="headerlink" title="基本实例化"></a>基本实例化</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p1 person</span><br><span class="line">	<span class="comment">//我们通过.来访问结构体的字段（成员变量）,例如p1.name和p1.age等。</span></span><br><span class="line">	p1.name = <span class="string">"pprof.cn"</span></span><br><span class="line">	p1.city = <span class="string">"北京"</span></span><br><span class="line">	p1.age = <span class="number">18</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>,p1)  <span class="comment">//main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">"p1=%v\n"</span>, p1)  <span class="comment">//p1=&#123;pprof.cn 北京 18&#125;</span></span><br><span class="line">	fmt.Printf(<span class="string">"p1=%#v\n"</span>, p1) <span class="comment">//p1=main.person&#123;name:"pprof.cn", city:"北京", age:18&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="键值对初始化"><a href="#键值对初始化" class="headerlink" title="键值对初始化"></a>键值对初始化</h4><p>使用键值对对结构体进行初始化时，键对应结构体的字段，值对应该字段的初始值。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p5 := person&#123;</span><br><span class="line">		name: <span class="string">"pprof.cn"</span>,</span><br><span class="line">		city: <span class="string">"北京"</span>,</span><br><span class="line">		age:  <span class="number">18</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, p5) <span class="comment">//main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">"p5=%#v\n"</span>, p5) <span class="comment">//p5=main.person&#123;name:"pprof.cn", city:"北京", age:18&#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="匿名结构体"><a href="#匿名结构体" class="headerlink" title="匿名结构体"></a>匿名结构体</h2><p>在定义一些临时数据结构等场景下还可以使用匿名结构体。<br>结构体允许其成员字段在声明时没有字段名而只有类型，这种没有名字的字段就称为匿名字段。<br>匿名字段默认采用类型名作为字段名，结构体要求字段名称必须唯一，因此一个结构体中同种类型的匿名字段只能有一个。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user <span class="keyword">struct</span>&#123;Name <span class="keyword">string</span>;Age <span class="keyword">int</span>&#125;</span><br><span class="line">	user.Name = <span class="string">"hello"</span></span><br><span class="line">	user.Age = <span class="number">18</span></span><br><span class="line">	fmt.Printf(<span class="string">"%#v\n"</span>, user)</span><br><span class="line">	<span class="comment">//输出：struct &#123; Name string; Age int &#125;&#123;Name:"hello", Age:18&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="指针类型结构体"><a href="#指针类型结构体" class="headerlink" title="指针类型结构体"></a>指针类型结构体</h2><h3 id="new关键字对结构体进行实例化"><a href="#new关键字对结构体进行实例化" class="headerlink" title="new关键字对结构体进行实例化"></a>new关键字对结构体进行实例化</h3><p>使用new关键字对结构体进行实例化，得到的是结构体的地址。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> p2 = <span class="built_in">new</span>(person)  <span class="comment">//p2是一个结构体指针</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, p2)     <span class="comment">//*main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">"p2=%#v\n"</span>, p2) <span class="comment">//p2=&amp;main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line">	<span class="comment">//在Go语言中支持对结构体指针直接使用.来访问结构体的成员</span></span><br><span class="line">	p2.name = <span class="string">"测试"</span></span><br><span class="line">	p2.age = <span class="number">18</span></span><br><span class="line">	p2.city = <span class="string">"北京"</span></span><br><span class="line">	fmt.Printf(<span class="string">"p2=%#v\n"</span>, p2) <span class="comment">//p2=&amp;main.person&#123;name:"测试", city:"北京", age:18&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="取结构体的地址实例化"><a href="#取结构体的地址实例化" class="headerlink" title="取结构体的地址实例化"></a>取结构体的地址实例化</h3><p>使用<code>&amp;</code>对结构体进行取地址操作相当于对该结构体类型进行了一次new实例化操作。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p3 := &amp;person&#123;&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, p3)     <span class="comment">//*main.person</span></span><br><span class="line">fmt.Printf(<span class="string">"p3=%#v\n"</span>, p3) <span class="comment">//p3=&amp;main.person&#123;name:"", city:"", age:0&#125;</span></span><br><span class="line">p3.name = <span class="string">"博客"</span></span><br><span class="line">p3.age = <span class="number">30</span></span><br><span class="line">p3.city = <span class="string">"成都"</span></span><br><span class="line">fmt.Printf(<span class="string">"p3=%#v\n"</span>, p3) <span class="comment">//p3=&amp;main.person&#123;name:"博客", city:"成都", age:30&#125;</span></span><br></pre></td></tr></table></figure></p>
<p><code>p3.name = &quot;博客&quot;</code>其实在底层是<code>(*p3).name = &quot;博客&quot;</code>，这是Go语言帮我们实现的语法糖。</p>
<h3 id="使用键值对初始化"><a href="#使用键值对初始化" class="headerlink" title="使用键值对初始化"></a>使用键值对初始化</h3><p>也可以对结构体指针进行键值对初始化:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p6 := &amp;person&#123;</span><br><span class="line">    name: <span class="string">"pprof.cn"</span>,</span><br><span class="line">    city: <span class="string">"北京"</span>,</span><br><span class="line">    age:  <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p6=%#v\n"</span>, p6) <span class="comment">//p6=&amp;main.person&#123;name:"pprof.cn", city:"北京", age:18&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>当某些字段没有初始值的时候，该字段可以不写。此时，没有指定初始值的字段的值就是该字段类型的零值。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p7 := &amp;person&#123;</span><br><span class="line">    city: <span class="string">"北京"</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p7=%#v\n"</span>, p7) <span class="comment">//p7=&amp;main.person&#123;name:"", city:"北京", age:0&#125;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="使用值的列表初始化"><a href="#使用值的列表初始化" class="headerlink" title="使用值的列表初始化"></a>使用值的列表初始化</h3><p>初始化结构体的时候可以简写，也就是初始化的时候不写键，直接写值:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p8 := &amp;person&#123;</span><br><span class="line">    <span class="string">"pprof.cn"</span>,</span><br><span class="line">    <span class="string">"北京"</span>,</span><br><span class="line">    <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"p8=%#v\n"</span>, p8) <span class="comment">//p8=&amp;main.person&#123;name:"pprof.cn", city:"北京", age:18&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>使用这种格式初始化时，需要注意：<br>1.必须初始化结构体的所有字段。<br>2.初始值的填充顺序必须与字段在结构体中的声明顺序一致。<br>3.该方式不能和键值初始化方式混用。</p>
<h2 id="结构体内存布局"><a href="#结构体内存布局" class="headerlink" title="结构体内存布局"></a>结构体内存布局</h2><p>这里先放段代码不做解释，在go的中级篇中具体阐释。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> test <span class="keyword">struct</span> &#123;</span><br><span class="line">		a <span class="keyword">int8</span></span><br><span class="line">		b <span class="keyword">uint32</span></span><br><span class="line">		c <span class="keyword">byte</span></span><br><span class="line">		d <span class="keyword">float32</span></span><br><span class="line">	&#125;</span><br><span class="line">	n := test&#123;</span><br><span class="line">		<span class="number">1</span>, <span class="number">2</span>, <span class="string">'a'</span>, <span class="number">1.2</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"n.a %p\n"</span>, &amp;n.a)</span><br><span class="line">	fmt.Printf(<span class="string">"n.b %p\n"</span>, &amp;n.b)</span><br><span class="line">	fmt.Printf(<span class="string">"n.c %p\n"</span>, &amp;n.c)</span><br><span class="line">	fmt.Printf(<span class="string">"n.d %p\n"</span>, &amp;n.d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n.a <span class="number">0xc00000a0d0</span></span><br><span class="line">n.b <span class="number">0xc00000a0d4</span></span><br><span class="line">n.c <span class="number">0xc00000a0d8</span></span><br><span class="line">n.d <span class="number">0xc00000a0dc</span></span><br></pre></td></tr></table></figure></p>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>Go语言的结构体没有构造函数，我们可以自己实现。 例如，下方的代码就实现了一个person的构造函数。 因为struct是值类型，如果结构体比较复杂的话，值拷贝性能开销会比较大，所以该构造函数返回的是结构体指针类型。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name, city <span class="keyword">string</span>,age <span class="keyword">int8</span>)</span> *<span class="title">person</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span>  &amp;person&#123;</span><br><span class="line">		name:name,</span><br><span class="line">		city:city,</span><br><span class="line">		age:age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//调用构造函数</span></span><br><span class="line">	p9 := newPerson(<span class="string">"hello"</span>,<span class="string">"world"</span>,<span class="number">90</span>)</span><br><span class="line">	fmt.Printf(<span class="string">"%#v\n"</span>,p9)  <span class="comment">//&amp;main.person&#123;name:"hello", city:"world", age:90&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="方法和接收者"><a href="#方法和接收者" class="headerlink" title="方法和接收者"></a>方法和接收者</h2><p>Go语言中的方法（Method）是一种作用于特定类型变量的函数。这种特定类型变量叫做接收者（Receiver）。接收者的概念就类似于其他语言中的this或者 self。</p>
<blockquote>
<p>方法与函数的区别是，函数不属于任何类型，方法属于特定的类型。</p>
</blockquote>
<p>方法的定义格式如下：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(接收者变量 接收者类型)</span> 方法名<span class="params">(参数列表)</span> <span class="params">(返回参数)</span></span> &#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其中：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>接收者变量：接收者中的参数变量名在命名时，官方建议使用接收者类型名的第一个小写字母，而不是self、this之类的命名。例如，Person类型的接收者变量应该命名为 p，Connector类型的接收者变量应该命名为c等。</span><br><span class="line"><span class="number">2.</span>接收者类型：接收者类型和参数类似，可以是指针类型和非指针类型。</span><br><span class="line"><span class="number">3.</span>方法名、参数列表、返回参数：具体格式与函数定义相同。</span><br></pre></td></tr></table></figure></p>
<p>举个例子：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Person结构体</span></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//NewPerson构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewPerson</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int8</span>)</span> *<span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;Person&#123;</span><br><span class="line">		name:name,</span><br><span class="line">		age:age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Dream Person做梦的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">Dream</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%s的梦想是学好go语言\n"</span>,p.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := NewPerson(<span class="string">"hello"</span>,<span class="number">25</span>)</span><br><span class="line">	p1.Dream()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="指针类型的接收者"><a href="#指针类型的接收者" class="headerlink" title="指针类型的接收者"></a>指针类型的接收者</h3><p>指针类型的接收者由一个结构体的指针组成，由于指针的特性，调用方法时修改接收者指针的任意成员变量，在方法结束后，修改都是有效的。这种方式就十分接近于其他语言中面向对象中的this或者self。<br>为Person添加一个SetAge方法，来修改实例变量的年龄:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SetAge 设置p的年龄</span></span><br><span class="line"><span class="comment">// 使用指针接收者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Person)</span> <span class="title">SetAge</span><span class="params">(newAge <span class="keyword">int8</span>)</span></span> &#123;</span><br><span class="line">	p.age = newAge</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>调用该方法:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := NewPerson(<span class="string">"hello"</span>, <span class="number">25</span>)</span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">	p1.SetAge(<span class="number">30</span>)</span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="值类型的接收者"><a href="#值类型的接收者" class="headerlink" title="值类型的接收者"></a>值类型的接收者</h3><p>当方法作用于值类型接收者时，Go语言会在代码运行时将接收者的值复制一份。在值类型接收者的方法中可以获取接收者的成员值，但修改操作只是针对副本，无法修改接收者变量本身。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SetAge2 设置p的年龄</span></span><br><span class="line"><span class="comment">// 使用值接收者</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Person)</span> <span class="title">SetAge2</span><span class="params">(newAge <span class="keyword">int8</span>)</span></span> &#123;</span><br><span class="line">	p.age = newAge</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := NewPerson(<span class="string">"hello"</span>, <span class="number">25</span>)</span><br><span class="line">	p1.Dream()</span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">	p1.SetAge2(<span class="number">30</span>) <span class="comment">// (*p1).SetAge2(30)</span></span><br><span class="line">	fmt.Println(p1.age) <span class="comment">// 25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="什么时候应该使用指针类型接收者"><a href="#什么时候应该使用指针类型接收者" class="headerlink" title="什么时候应该使用指针类型接收者"></a>什么时候应该使用指针类型接收者</h3><p>1.需要修改接收者中的值<br>2.接收者是拷贝代价比较大的大对象<br>3.保证一致性，如果有某个方法使用了指针接收者，那么其他的方法也应该使用指针接收者。</p>
<h3 id="任意类型添加方法"><a href="#任意类型添加方法" class="headerlink" title="任意类型添加方法"></a>任意类型添加方法</h3><p>在Go语言中，接收者的类型可以是任何类型，不仅仅是结构体，任何类型都可以拥有方法。 举个例子，我们基于内置的int类型使用type关键字可以定义新的自定义类型，然后为我们的自定义类型添加方法。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//MyInt 将int定义为自定义MyInt类型</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//SayHello 为MyInt添加一个SayHello的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyInt)</span> <span class="title">SayHello</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"Hello, 我是一个int。"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> m1 MyInt</span><br><span class="line">	m1.SayHello() <span class="comment">//Hello, 我是一个int。</span></span><br><span class="line">	m1 = <span class="number">100</span></span><br><span class="line">	fmt.Printf(<span class="string">"%#v  %T\n"</span>, m1, m1) <span class="comment">//100  main.MyInt</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意事项： 非本地类型不能定义方法，也就是说我们不能给别的包的类型定义方法。</p>
<h2 id="嵌套结构体"><a href="#嵌套结构体" class="headerlink" title="嵌套结构体"></a>嵌套结构体</h2><p>一个结构体中可以嵌套包含另一个结构体或结构体指针。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">	Province <span class="keyword">string</span></span><br><span class="line">	City <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">	Address Address</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	user1 := User&#123;</span><br><span class="line">		Name:    <span class="string">"hello"</span>,</span><br><span class="line">		Gender:  <span class="string">"男"</span>,</span><br><span class="line">		Address: Address&#123;</span><br><span class="line">			Province:<span class="string">"四川"</span>,</span><br><span class="line">			City:<span class="string">"成都"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"user1 = %#v\n"</span>, user1)</span><br><span class="line">	<span class="comment">//输出：user1 = main.User&#123;Name:"hello", Gender:"男", Address:main.Address&#123;Province:"四川", City:"成都"&#125;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="嵌套匿名结构体"><a href="#嵌套匿名结构体" class="headerlink" title="嵌套匿名结构体"></a>嵌套匿名结构体</h3><p>当访问结构体成员时会先在结构体中查找该字段，找不到再去匿名结构体中查找。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">	Province <span class="keyword">string</span></span><br><span class="line">	City <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">	Address  <span class="comment">//匿名结构体，实现代码的复用</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user2 User</span><br><span class="line">	user2.Name = <span class="string">"hello"</span></span><br><span class="line">	user2.Gender = <span class="string">"男"</span></span><br><span class="line">	user2.Address.Province = <span class="string">"四川"</span> <span class="comment">//通过匿名结构体.字段名访问</span></span><br><span class="line">	user2.City = <span class="string">"成都"</span>             <span class="comment">//直接访问匿名结构体的字段名</span></span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>,user2) <span class="comment">//main.User</span></span><br><span class="line">	fmt.Printf(<span class="string">"user2 = %#v\n"</span>, user2)</span><br><span class="line">	<span class="comment">//user2 = main.User&#123;Name:"hello", Gender:"男", Address:main.Address&#123;Province:"四川", City:"成都"&#125;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="嵌套结构体的字段名冲突"><a href="#嵌套结构体的字段名冲突" class="headerlink" title="嵌套结构体的字段名冲突"></a>嵌套结构体的字段名冲突</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Address <span class="keyword">struct</span> &#123;</span><br><span class="line">	Province <span class="keyword">string</span></span><br><span class="line">	City <span class="keyword">string</span></span><br><span class="line">	CreateTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Email <span class="keyword">struct</span> &#123;</span><br><span class="line">	Account <span class="keyword">string</span></span><br><span class="line">	CreateTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">	Address  <span class="comment">//匿名结构体</span></span><br><span class="line">	Email</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user3 User</span><br><span class="line">	user3.Name = <span class="string">"pprof"</span></span><br><span class="line">	user3.Gender = <span class="string">"男"</span></span><br><span class="line">	<span class="comment">// user3.CreateTime = "2019" //会报错：ambiguous selector user3.CreateTime</span></span><br><span class="line">	user3.Address.CreateTime = <span class="string">"2000"</span></span><br><span class="line">	user3.Email.CreateTime = <span class="string">"2019"</span></span><br><span class="line">	fmt.Printf(<span class="string">"user3 = %#v\n"</span>, user3)</span><br><span class="line">	<span class="comment">//user3 = main.User&#123;Name:"pprof", Gender:"男", Address:main.Address&#123;Province:"", City:"", CreateTime:"2000"&#125;, Email:main.Email&#123;Account:"", CreateTime:"2019"&#125;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体的“继承”"><a href="#结构体的“继承”" class="headerlink" title="结构体的“继承”"></a>结构体的“继承”</h2><p>Go语言中使用结构体也可以实现其他编程语言中面向对象的继承。<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Animal <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *Animal)</span> <span class="title">move</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%s会动\n"</span>,a.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	Feet <span class="keyword">int8</span></span><br><span class="line">	*Animal  <span class="comment">//通过嵌套匿名结构体实现继承</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *Dog)</span> <span class="title">wang</span><span class="params">()</span></span>&#123;</span><br><span class="line">	fmt.Printf(<span class="string">"%s会汪汪汪\n"</span>,d.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	d1 := &amp;Dog&#123;</span><br><span class="line">		Feet:   <span class="number">4</span>,</span><br><span class="line">		Animal: &amp;Animal&#123; <span class="comment">//注意嵌套的是结构体指针</span></span><br><span class="line">			name:<span class="string">"乐乐"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	d1.wang()  <span class="comment">//乐乐会汪汪汪</span></span><br><span class="line">	d1.move()  <span class="comment">//乐乐会动</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="结构体字段的可见性"><a href="#结构体字段的可见性" class="headerlink" title="结构体字段的可见性"></a>结构体字段的可见性</h2><p>结构体中字段大写开头表示可公开访问，小写表示私有（仅在定义当前结构体的包中可访问）。</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//设置种子，只需一次</span></span><br><span class="line">	<span class="comment">//rand.Seed(666) //如果种子参数一样，每次运行程序产生的随机数都一样</span></span><br><span class="line">	rand.Seed(time.Now().UnixNano()) <span class="comment">//以当前系统时间为种子参数</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i&lt;<span class="number">5</span>; i++&#123;</span><br><span class="line">		<span class="comment">//产生随机数</span></span><br><span class="line">		fmt.Println(<span class="string">"rand = "</span>,rand.Int()) <span class="comment">//会随机一个很大的数</span></span><br><span class="line">		fmt.Println(<span class="string">"rand = "</span>,rand.Intn(<span class="number">100</span>)) <span class="comment">//限制在100内的数，不包括100但包括0</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().Unix())</span><br><span class="line">	<span class="keyword">var</span> a [<span class="number">10</span>] <span class="keyword">int</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i ++ &#123;</span><br><span class="line">		a[i] = rand.Intn(<span class="number">100</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"排序前："</span>,a)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="built_in">len</span>(a); i &gt; <span class="number">0</span>; i -- &#123;</span><br><span class="line">		<span class="keyword">for</span> j:= <span class="number">0</span>; j &lt; i &amp;&amp; j +<span class="number">1</span> &lt; i; j ++&#123;</span><br><span class="line">			<span class="keyword">if</span> a[j] &gt; a[j+<span class="number">1</span>] &#123;</span><br><span class="line">				a[j] ,a[j+<span class="number">1</span>] = a[j+<span class="number">1</span>], a[j]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"排序后："</span>,a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">排序前： [<span class="number">56</span> <span class="number">67</span> <span class="number">48</span> <span class="number">60</span> <span class="number">8</span> <span class="number">15</span> <span class="number">21</span> <span class="number">60</span> <span class="number">82</span> <span class="number">39</span>]</span><br><span class="line">排序后： [<span class="number">8</span> <span class="number">15</span> <span class="number">21</span> <span class="number">39</span> <span class="number">48</span> <span class="number">56</span> <span class="number">60</span> <span class="number">60</span> <span class="number">67</span> <span class="number">82</span>]</span><br></pre></td></tr></table></figure></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/go/" rel="tag"># go</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2020/01/13/%E9%9D%A2%E8%AF%95-%E5%9F%BA%E7%A1%80/" rel="next" title="面试-基础">
      面试-基础 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Go基础"><span class="nav-number">1.</span> <span class="nav-text">Go基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#命令行运行程序"><span class="nav-number">1.1.</span> <span class="nav-text">命令行运行程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串格式化时常用动词及功能"><span class="nav-number">1.2.</span> <span class="nav-text">字符串格式化时常用动词及功能</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据类型"><span class="nav-number">2.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#布尔型"><span class="nav-number">2.1.</span> <span class="nav-text">布尔型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数字类型"><span class="nav-number">2.2.</span> <span class="nav-text">数字类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他数字类型"><span class="nav-number">2.3.</span> <span class="nav-text">其他数字类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串类型"><span class="nav-number">2.4.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#派生类型"><span class="nav-number">2.5.</span> <span class="nav-text">派生类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#变量"><span class="nav-number">3.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#变量的初始化"><span class="nav-number">3.1.</span> <span class="nav-text">变量的初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自动推导类型"><span class="nav-number">3.2.</span> <span class="nav-text">自动推导类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多变量声明"><span class="nav-number">3.3.</span> <span class="nav-text">多变量声明</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#交换两个变量的值"><span class="nav-number">3.3.1.</span> <span class="nav-text">交换两个变量的值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#匿名变量，丢弃数据不处理"><span class="nav-number">3.3.2.</span> <span class="nav-text">匿名变量，丢弃数据不处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量的输入"><span class="nav-number">3.4.</span> <span class="nav-text">变量的输入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类型转换"><span class="nav-number">3.5.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类型别名"><span class="nav-number">3.6.</span> <span class="nav-text">类型别名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#值类型和引用类型"><span class="nav-number">3.7.</span> <span class="nav-text">值类型和引用类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常量"><span class="nav-number">4.</span> <span class="nav-text">常量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#枚举"><span class="nav-number">4.1.</span> <span class="nav-text">枚举</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iota"><span class="nav-number">4.2.</span> <span class="nav-text">iota</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#iota实例1"><span class="nav-number">4.2.1.</span> <span class="nav-text">iota实例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iota实例2"><span class="nav-number">4.2.2.</span> <span class="nav-text">iota实例2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Go语言运算符"><span class="nav-number">5.</span> <span class="nav-text">Go语言运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#算术运算符"><span class="nav-number">5.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关系运算符"><span class="nav-number">5.2.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">5.3.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#位运算符"><span class="nav-number">5.4.</span> <span class="nav-text">位运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#赋值运算符"><span class="nav-number">5.5.</span> <span class="nav-text">赋值运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他运算符"><span class="nav-number">5.6.</span> <span class="nav-text">其他运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算符优先级"><span class="nav-number">5.7.</span> <span class="nav-text">运算符优先级</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#流程控制"><span class="nav-number">6.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#条件判断语句"><span class="nav-number">6.1.</span> <span class="nav-text">条件判断语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if语句"><span class="nav-number">6.1.1.</span> <span class="nav-text">if语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if…else语句"><span class="nav-number">6.1.2.</span> <span class="nav-text">if…else语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch语句"><span class="nav-number">6.1.3.</span> <span class="nav-text">switch语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#实例1"><span class="nav-number">6.1.3.1.</span> <span class="nav-text">实例1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实例2"><span class="nav-number">6.1.3.2.</span> <span class="nav-text">实例2</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#select语句"><span class="nav-number">6.1.4.</span> <span class="nav-text">select语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基本语法"><span class="nav-number">6.1.4.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#例1"><span class="nav-number">6.1.4.2.</span> <span class="nav-text">例1</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#循环"><span class="nav-number">6.2.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#break和continue"><span class="nav-number">6.2.1.</span> <span class="nav-text">break和continue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#goto的使用"><span class="nav-number">6.2.2.</span> <span class="nav-text">goto的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#range的使用"><span class="nav-number">6.2.3.</span> <span class="nav-text">range的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无限循环"><span class="nav-number">6.2.4.</span> <span class="nav-text">无限循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#练习"><span class="nav-number">6.2.5.</span> <span class="nav-text">练习</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数"><span class="nav-number">7.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#函数定义及调用"><span class="nav-number">7.1.</span> <span class="nav-text">函数定义及调用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#有参有返回值"><span class="nav-number">7.1.1.</span> <span class="nav-text">有参有返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#无参有返回值"><span class="nav-number">7.1.2.</span> <span class="nav-text">无参有返回值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数返回多个值"><span class="nav-number">7.1.3.</span> <span class="nav-text">函数返回多个值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不定参数列表"><span class="nav-number">7.2.</span> <span class="nav-text">不定参数列表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实例1-1"><span class="nav-number">7.2.1.</span> <span class="nav-text">实例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例2-1"><span class="nav-number">7.2.2.</span> <span class="nav-text">实例2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数参数"><span class="nav-number">7.3.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数调用流程"><span class="nav-number">7.4.</span> <span class="nav-text">函数调用流程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#普通函数"><span class="nav-number">7.4.1.</span> <span class="nav-text">普通函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#递归调用"><span class="nav-number">7.4.2.</span> <span class="nav-text">递归调用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例1-递归实现累加"><span class="nav-number">7.4.3.</span> <span class="nav-text">实例1 递归实现累加</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数类型"><span class="nav-number">7.5.</span> <span class="nav-text">函数类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实例1-2"><span class="nav-number">7.5.1.</span> <span class="nav-text">实例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例2-回调函数"><span class="nav-number">7.5.2.</span> <span class="nav-text">实例2 回调函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匿名函数"><span class="nav-number">7.6.</span> <span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#延迟调用defer"><span class="nav-number">7.7.</span> <span class="nav-text">延迟调用defer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#例1-1"><span class="nav-number">7.7.1.</span> <span class="nav-text">例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例2"><span class="nav-number">7.7.2.</span> <span class="nav-text">例2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#defer和匿名函数结合使用"><span class="nav-number">7.7.3.</span> <span class="nav-text">defer和匿名函数结合使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#例1-2"><span class="nav-number">7.7.3.1.</span> <span class="nav-text">例1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#例2-1"><span class="nav-number">7.7.3.2.</span> <span class="nav-text">例2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取命令行参数"><span class="nav-number">7.8.</span> <span class="nav-text">获取命令行参数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Go工程管理"><span class="nav-number">8.</span> <span class="nav-text">Go工程管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区"><span class="nav-number">8.1.</span> <span class="nav-text">工作区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置GOPATH有什么意义"><span class="nav-number">8.2.</span> <span class="nav-text">设置GOPATH有什么意义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包"><span class="nav-number">8.3.</span> <span class="nav-text">包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#远程包导入"><span class="nav-number">8.3.1.</span> <span class="nav-text">远程包导入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命名导入"><span class="nav-number">8.3.2.</span> <span class="nav-text">命名导入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#忽略包"><span class="nav-number">8.3.2.1.</span> <span class="nav-text">忽略包</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#包的init函数"><span class="nav-number">8.3.3.</span> <span class="nav-text">包的init函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#包的调用"><span class="nav-number">8.3.4.</span> <span class="nav-text">包的调用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不同目录的包的调用"><span class="nav-number">8.3.4.1.</span> <span class="nav-text">不同目录的包的调用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实例1-3"><span class="nav-number">8.3.4.2.</span> <span class="nav-text">实例1</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#指针"><span class="nav-number">9.</span> <span class="nav-text">指针</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#new和make"><span class="nav-number">9.1.</span> <span class="nav-text">new和make</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#new"><span class="nav-number">9.1.1.</span> <span class="nav-text">new</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#make"><span class="nav-number">9.1.2.</span> <span class="nav-text">make</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#new和make区别"><span class="nav-number">9.1.3.</span> <span class="nav-text">new和make区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#普通变量做函数参数"><span class="nav-number">9.2.</span> <span class="nav-text">普通变量做函数参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组指针做函数"><span class="nav-number">9.3.</span> <span class="nav-text">数组指针做函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数组"><span class="nav-number">10.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#声明数组"><span class="nav-number">10.1.</span> <span class="nav-text">声明数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#初始化数组-声明定义同时赋值，叫初始化"><span class="nav-number">10.2.</span> <span class="nav-text">初始化数组(声明定义同时赋值，叫初始化)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二维数组"><span class="nav-number">10.3.</span> <span class="nav-text">二维数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化二维数组"><span class="nav-number">10.3.1.</span> <span class="nav-text">初始化二维数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#访问二维数组"><span class="nav-number">10.3.2.</span> <span class="nav-text">访问二维数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组比较和赋值"><span class="nav-number">10.4.</span> <span class="nav-text">数组比较和赋值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#练习-1"><span class="nav-number">10.5.</span> <span class="nav-text">练习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#例1-3"><span class="nav-number">10.5.1.</span> <span class="nav-text">例1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#例2-2"><span class="nav-number">10.5.2.</span> <span class="nav-text">例2</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#切片-slice"><span class="nav-number">11.</span> <span class="nav-text">切片(slice)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#切片的创建和初始化"><span class="nav-number">11.1.</span> <span class="nav-text">切片的创建和初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切片和底层数组的关系"><span class="nav-number">11.2.</span> <span class="nav-text">切片和底层数组的关系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#超出原-slice-cap-限制"><span class="nav-number">11.2.1.</span> <span class="nav-text">超出原 slice.cap 限制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#slice中cap重新分配规律"><span class="nav-number">11.2.2.</span> <span class="nav-text">slice中cap重新分配规律</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切片拷贝"><span class="nav-number">11.3.</span> <span class="nav-text">切片拷贝</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串和切片"><span class="nav-number">11.4.</span> <span class="nav-text">字符串和切片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#利用切片实现猜数字游戏"><span class="nav-number">11.5.</span> <span class="nav-text">利用切片实现猜数字游戏</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Map"><span class="nav-number">12.</span> <span class="nav-text">Map</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#map的基本使用"><span class="nav-number">12.1.</span> <span class="nav-text">map的基本使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#判断某个键是否存在"><span class="nav-number">12.2.</span> <span class="nav-text">判断某个键是否存在</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#map的遍历"><span class="nav-number">12.3.</span> <span class="nav-text">map的遍历</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#map的删除"><span class="nav-number">12.4.</span> <span class="nav-text">map的删除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按照指定顺序遍历map"><span class="nav-number">12.5.</span> <span class="nav-text">按照指定顺序遍历map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#元素为map类型的切片"><span class="nav-number">12.6.</span> <span class="nav-text">元素为map类型的切片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#值为切片类型的map"><span class="nav-number">12.7.</span> <span class="nav-text">值为切片类型的map</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#结构体"><span class="nav-number">13.</span> <span class="nav-text">结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#类型别名和自定义类型"><span class="nav-number">13.1.</span> <span class="nav-text">类型别名和自定义类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义类型"><span class="nav-number">13.1.1.</span> <span class="nav-text">自定义类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型别名-1"><span class="nav-number">13.1.2.</span> <span class="nav-text">类型别名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型定义和类型别名的区别"><span class="nav-number">13.1.3.</span> <span class="nav-text">类型定义和类型别名的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结构体-1"><span class="nav-number">13.2.</span> <span class="nav-text">结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#结构体的定义"><span class="nav-number">13.2.1.</span> <span class="nav-text">结构体的定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结构体实例化"><span class="nav-number">13.2.2.</span> <span class="nav-text">结构体实例化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基本实例化"><span class="nav-number">13.2.2.1.</span> <span class="nav-text">基本实例化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#键值对初始化"><span class="nav-number">13.2.2.2.</span> <span class="nav-text">键值对初始化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匿名结构体"><span class="nav-number">13.3.</span> <span class="nav-text">匿名结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指针类型结构体"><span class="nav-number">13.4.</span> <span class="nav-text">指针类型结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#new关键字对结构体进行实例化"><span class="nav-number">13.4.1.</span> <span class="nav-text">new关键字对结构体进行实例化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取结构体的地址实例化"><span class="nav-number">13.4.2.</span> <span class="nav-text">取结构体的地址实例化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用键值对初始化"><span class="nav-number">13.4.3.</span> <span class="nav-text">使用键值对初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用值的列表初始化"><span class="nav-number">13.4.4.</span> <span class="nav-text">使用值的列表初始化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结构体内存布局"><span class="nav-number">13.5.</span> <span class="nav-text">结构体内存布局</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构造函数"><span class="nav-number">13.6.</span> <span class="nav-text">构造函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#方法和接收者"><span class="nav-number">13.7.</span> <span class="nav-text">方法和接收者</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#指针类型的接收者"><span class="nav-number">13.7.1.</span> <span class="nav-text">指针类型的接收者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#值类型的接收者"><span class="nav-number">13.7.2.</span> <span class="nav-text">值类型的接收者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么时候应该使用指针类型接收者"><span class="nav-number">13.7.3.</span> <span class="nav-text">什么时候应该使用指针类型接收者</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#任意类型添加方法"><span class="nav-number">13.7.4.</span> <span class="nav-text">任意类型添加方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#嵌套结构体"><span class="nav-number">13.8.</span> <span class="nav-text">嵌套结构体</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套匿名结构体"><span class="nav-number">13.8.1.</span> <span class="nav-text">嵌套匿名结构体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套结构体的字段名冲突"><span class="nav-number">13.8.2.</span> <span class="nav-text">嵌套结构体的字段名冲突</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结构体的“继承”"><span class="nav-number">13.9.</span> <span class="nav-text">结构体的“继承”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结构体字段的可见性"><span class="nav-number">13.10.</span> <span class="nav-text">结构体字段的可见性</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他"><span class="nav-number">14.</span> <span class="nav-text">其他</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#随机数"><span class="nav-number">14.1.</span> <span class="nav-text">随机数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#冒泡排序"><span class="nav-number">14.2.</span> <span class="nav-text">冒泡排序</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="chen"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">chen</p>
  <div class="site-description" itemprop="description">大人，时代变了</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/747948341@qq.com" title="E-Mail → 747948341@qq.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chen</span>
</div>



        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
